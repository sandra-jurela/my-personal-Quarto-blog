{
  "hash": "836e47ca8b1a6a19fad94b843180aa9e",
  "result": {
    "markdown": "---\ntitle: \"Streamlit app - Airbnb Amsterdam Listings\"\ndescription: \"Cleaning data with Pandas and creating a streamlit app.\"\ndate: \"2023-05-05\"\ncategories: \n  - python\n  - sreamlit\n  - data cleaning\nformat:\n  html:\n    theme: theme-light.scss\n    css: style_python.css\nimage: preview.png\n---\n\n## Introduction\n\n## Data overview\n\nSetting up the programming environment\n\n::: {.cell execution_count=1}\n``` {.python .cell-code}\n# load libraries\nimport numpy as np\nimport pandas as pd\n\n# show all columns (instead of cascading columns in the middle)\npd.set_option(\"display.max_columns\", None)\n# don't show numbers in scientific notation\npd.set_option(\"display.float_format\", \"{:.2f}\".format)\n```\n:::\n\n\nReading the datasets\n\n::: {.cell execution_count=2}\n``` {.python .cell-code}\n# read the Python Pickle and PyArrow Parquet files\ndf_list = pd.read_pickle(\"data/airbnb_amsterdam_listings.pkl\")\ndf_cal = pd.read_parquet(\"data/airbnb_amsterdam_calendar.parquet\", engine=\"pyarrow\")\n```\n:::\n\n\nDatasets overview\n\n::: {.cell execution_count=3}\n``` {.python .cell-code}\ndf_list.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>id</th>\n      <th>host_acceptance_rate</th>\n      <th>host_is_superhost</th>\n      <th>host_listings_count</th>\n      <th>host_total_listings_count</th>\n      <th>neighbourhood_cleansed</th>\n      <th>latitude</th>\n      <th>longitude</th>\n      <th>room_type</th>\n      <th>accommodates</th>\n      <th>bedrooms</th>\n      <th>beds</th>\n      <th>amenities</th>\n      <th>price</th>\n      <th>minimum_nights</th>\n      <th>maximum_nights</th>\n      <th>has_availability</th>\n      <th>availability_30</th>\n      <th>availability_60</th>\n      <th>availability_90</th>\n      <th>availability_365</th>\n      <th>number_of_reviews</th>\n      <th>number_of_reviews_ltm</th>\n      <th>number_of_reviews_l30d</th>\n      <th>review_scores_rating</th>\n      <th>instant_bookable</th>\n      <th>reviews_per_month</th>\n      <th>price_in_euros</th>\n      <th>price_per_person</th>\n      <th>minimum_price</th>\n      <th>discount_per_5_days_booked</th>\n      <th>discount_per_10_days_booked</th>\n      <th>discount_per_30_and_more_days_booked</th>\n      <th>service_cost</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>23726706</td>\n      <td>0.95</td>\n      <td>f</td>\n      <td>1</td>\n      <td>1</td>\n      <td>IJburg - Zeeburgereiland</td>\n      <td>52.35</td>\n      <td>4.98</td>\n      <td>Private room</td>\n      <td>2</td>\n      <td>1.00</td>\n      <td>1.00</td>\n      <td>6</td>\n      <td>$88.00</td>\n      <td>2</td>\n      <td>14</td>\n      <td>t</td>\n      <td>0</td>\n      <td>6</td>\n      <td>20</td>\n      <td>66</td>\n      <td>78</td>\n      <td>11</td>\n      <td>3</td>\n      <td>4.99</td>\n      <td>t</td>\n      <td>1.53</td>\n      <td>None</td>\n      <td>$44</td>\n      <td>$176</td>\n      <td>5%</td>\n      <td>11%</td>\n      <td>16%</td>\n      <td>$4.99</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>35815036</td>\n      <td>1.00</td>\n      <td>t</td>\n      <td>1</td>\n      <td>1</td>\n      <td>Noord-Oost</td>\n      <td>52.42</td>\n      <td>4.96</td>\n      <td>Entire home/apt</td>\n      <td>2</td>\n      <td>NaN</td>\n      <td>1.00</td>\n      <td>5</td>\n      <td>$105.00</td>\n      <td>3</td>\n      <td>100</td>\n      <td>t</td>\n      <td>4</td>\n      <td>6</td>\n      <td>12</td>\n      <td>243</td>\n      <td>95</td>\n      <td>36</td>\n      <td>6</td>\n      <td>4.96</td>\n      <td>f</td>\n      <td>2.65</td>\n      <td>None</td>\n      <td>$52.5</td>\n      <td>$315</td>\n      <td>5%</td>\n      <td>12%</td>\n      <td>16%</td>\n      <td>$4.99</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>31553121</td>\n      <td>1.00</td>\n      <td>f</td>\n      <td>1</td>\n      <td>1</td>\n      <td>Noord-West</td>\n      <td>52.43</td>\n      <td>4.92</td>\n      <td>Entire home/apt</td>\n      <td>4</td>\n      <td>1.00</td>\n      <td>3.00</td>\n      <td>3</td>\n      <td>$152.00</td>\n      <td>2</td>\n      <td>60</td>\n      <td>t</td>\n      <td>0</td>\n      <td>3</td>\n      <td>3</td>\n      <td>3</td>\n      <td>82</td>\n      <td>26</td>\n      <td>1</td>\n      <td>4.74</td>\n      <td>f</td>\n      <td>2.02</td>\n      <td>None</td>\n      <td>$38</td>\n      <td>$304</td>\n      <td>7%</td>\n      <td>11%</td>\n      <td>22%</td>\n      <td>$4.99</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>34745823</td>\n      <td>0.94</td>\n      <td>f</td>\n      <td>3</td>\n      <td>3</td>\n      <td>Gaasperdam - Driemond</td>\n      <td>52.30</td>\n      <td>5.01</td>\n      <td>Entire home/apt</td>\n      <td>2</td>\n      <td>1.00</td>\n      <td>2.00</td>\n      <td>8</td>\n      <td>$87.00</td>\n      <td>2</td>\n      <td>1125</td>\n      <td>t</td>\n      <td>5</td>\n      <td>20</td>\n      <td>26</td>\n      <td>290</td>\n      <td>39</td>\n      <td>4</td>\n      <td>0</td>\n      <td>4.87</td>\n      <td>f</td>\n      <td>1.08</td>\n      <td>None</td>\n      <td>$43.5</td>\n      <td>$174</td>\n      <td>6%</td>\n      <td>10%</td>\n      <td>15%</td>\n      <td>$4.99</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>44586947</td>\n      <td>0.88</td>\n      <td>t</td>\n      <td>0</td>\n      <td>0</td>\n      <td>Gaasperdam - Driemond</td>\n      <td>52.31</td>\n      <td>5.03</td>\n      <td>Private room</td>\n      <td>4</td>\n      <td>2.00</td>\n      <td>3.00</td>\n      <td>4</td>\n      <td>$160.00</td>\n      <td>2</td>\n      <td>31</td>\n      <td>t</td>\n      <td>9</td>\n      <td>32</td>\n      <td>62</td>\n      <td>152</td>\n      <td>15</td>\n      <td>12</td>\n      <td>3</td>\n      <td>5.00</td>\n      <td>f</td>\n      <td>0.68</td>\n      <td>None</td>\n      <td>$40</td>\n      <td>$320</td>\n      <td>9%</td>\n      <td>22%</td>\n      <td>20%</td>\n      <td>$4.99</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n<br/>\n\n### Data dictionary for listings data\n\nHere is the definition of the listings data columns:\n\n-   `id` - Airbnb's unique identifier for the listing\n-   `host_acceptance_rate` - Rate at which a host accepts booking request\n-   `host_is_superhost` - Some Airbnb hosts are considered better than others, which this feature displays\n-   `host_listings_count` - The number of listings the host has (per Airbnb calculations)\n-   `host_total_listings_count` - The number of listings the host has (per Airbnb calculations)\n-   `neighborhood_cleansed` - All neighborhoods present in Amsterdam\n-   `latitude` - Geographical coordinate going from North to South\n-   `longitude` - Geographical coordinate going from East to West\n-   `room_type` - All room types available in Amsterdam on Airbnb\n-   `accommodates` - Maximum number of people that can fit in the Airbnb listing\n-   `bedrooms` - Number of bedrooms\n-   `beds` - Number of beds (does not reveal if they are two-person or one-person beds)\n-   `amenities` - Number of amenities present in the Airbnb listing\n-   `price` - Price per day in US dollars\n-   `minimum_nights` - Minimum number of nights you need to book for this listing\n-   `maximum_nights` - Maximum number of nights you are allowed to book this listing\n-   `has_availability` - Displays if this listing can be booked\n-   `availability_30` - Number of available spots in the next 30 days\n-   `number_of_reviews_l30d` - Number of reviews created in the last 30 days\n-   `review_scores_rating` - Average rating given to the Airbnb listing\n-   `instant_bookable` - Whether the guest can automatically book the listing without the host requiring to accept their booking request. An indicator of a commercial listing.\n-   `price_per_person` - Price per person per night in US dollars\n-   `minimum_price` - Price in US dollars times minimum nights\n-   `discount_per_â€¦` - Displays the discount when 5, 10, or 30+ days are booked\n-   `service_cost` - Total service cost paid at booking\n\n::: {.cell execution_count=4}\n``` {.python .cell-code}\ndf_cal.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=4}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>listing_id</th>\n      <th>date</th>\n      <th>available</th>\n      <th>price_in_dollar</th>\n      <th>minimum_nights</th>\n      <th>maximum_nights</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>23726706</td>\n      <td>2022-06-05</td>\n      <td>False</td>\n      <td>90.00</td>\n      <td>2</td>\n      <td>1125</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>23726706</td>\n      <td>2022-06-06</td>\n      <td>False</td>\n      <td>90.00</td>\n      <td>2</td>\n      <td>1125</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>23726706</td>\n      <td>2022-06-07</td>\n      <td>False</td>\n      <td>90.00</td>\n      <td>2</td>\n      <td>1125</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>23726706</td>\n      <td>2022-06-08</td>\n      <td>False</td>\n      <td>90.00</td>\n      <td>2</td>\n      <td>1125</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>23726706</td>\n      <td>2022-06-09</td>\n      <td>False</td>\n      <td>85.00</td>\n      <td>2</td>\n      <td>1125</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n### Data dictionary for calendar data\n\n| Column name     | Data type | Definition                                    |\n|-------------------|-------------------|----------------------------------|\n| listing_id      | integer   | Airbnb's unique identifier for the listing    |\n| date            | datetime  | The date in the listing's calendar            |\n| available       | boolean   | Whether the date is available for a booking   |\n| price_in_dollar | float     | The price listed for the day                  |\n| minimum_nights  | integer   | Minimum nights for a booking made on this day |\n| maximum_nights  | integer   | Maximum nights for a booking made on this day |\n\n## Cleaning the data\n\n## Streamlit application\n\n::: column-body\n<iframe height=\"1450\" width=\"100%\" frameborder=\"no\" src=\"https://sandra-jurela-airbnb-amsterdam-streamlit-app-app-zls5nw.streamlit.app/?embedded=true\">\n\n</iframe>\n:::\n\n",
    "supporting": [
      "amsterdam-listings_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}