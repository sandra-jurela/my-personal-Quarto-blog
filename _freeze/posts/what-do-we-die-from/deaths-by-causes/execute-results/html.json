{
  "hash": "7c8095541f078c79d2ad3e7e964d269c",
  "result": {
    "markdown": "---\ntitle: \"What Do We Die From?\"\ndescription: |\n  An exploratory data analysis of the Our World in Data dataset.\ndate: 2022-04-21\ncategories:\n  - EDA\n  - data cleaning\n  - data manipulation\n  - data visualization\n  - R\n---\n\n\n## Introduction\n\n56 million people died in 2019. What did they die from?\n\nThe *Global Burden of Disease* is a major global study on the causes of death and disease published in the medical journal *The Lancet*. These estimates of the annual number of deaths by cause are shown here.\n\nIn the epidemiological framework of the Global Burden of Disease study each death has one specific cause. In their own words: \"each death is attributed to a single underlying cause --- the cause that initiated the series of events leading to death\".\n\nAbout the Global Burden of Disease\n\nThe GBD study offers a powerful resource to understand the changing health challenges facing people across the world in the 21st century. Led by the Institute for Health Metrics and Evaluation (IHME), the GBD study is the most comprehensive worldwide observational epidemiological study to date. By tracking progress within and between countries GBD provides an important tool to inform clinicians, researchers, and policy makers, promote accountability, and improve lives worldwide.\n\n#### Data\n\nYou can download the data on Number of deaths by cause from 1990 to 2019 from here [Our World in Data](https://ourworldindata.org/causes-of-death#) or from the original source [IHME, Global Burden of Disease](https://vizhub.healthdata.org/gbd-results/).\n\n## ðŸ§¹ Data cleaning and manipulation\n\n### Setting up the programming environment\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(visdat)\n```\n:::\n\n\n### Reading the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndeaths <- read_csv(\"data/annual-number-of-deaths-by-cause.csv\")\n\nglimpse(deaths)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 7,273\nColumns: 36\n$ Entity                                                                                     <chr> â€¦\n$ Code                                                                                       <chr> â€¦\n$ Year                                                                                       <dbl> â€¦\n$ `Number of executions (Amnesty International)`                                             <chr> â€¦\n$ `Deaths - Meningitis - Sex: Both - Age: All Ages (Number)`                                 <dbl> â€¦\n$ `Deaths - Alzheimer's disease and other dementias - Sex: Both - Age: All Ages (Number)`    <dbl> â€¦\n$ `Deaths - Parkinson's disease - Sex: Both - Age: All Ages (Number)`                        <dbl> â€¦\n$ `Deaths - Nutritional deficiencies - Sex: Both - Age: All Ages (Number)`                   <dbl> â€¦\n$ `Deaths - Malaria - Sex: Both - Age: All Ages (Number)`                                    <dbl> â€¦\n$ `Deaths - Drowning - Sex: Both - Age: All Ages (Number)`                                   <dbl> â€¦\n$ `Deaths - Interpersonal violence - Sex: Both - Age: All Ages (Number)`                     <dbl> â€¦\n$ `Deaths - Maternal disorders - Sex: Both - Age: All Ages (Number)`                         <dbl> â€¦\n$ `Deaths - HIV/AIDS - Sex: Both - Age: All Ages (Number)`                                   <dbl> â€¦\n$ `Deaths - Drug use disorders - Sex: Both - Age: All Ages (Number)`                         <dbl> â€¦\n$ `Deaths - Tuberculosis - Sex: Both - Age: All Ages (Number)`                               <dbl> â€¦\n$ `Deaths - Cardiovascular diseases - Sex: Both - Age: All Ages (Number)`                    <dbl> â€¦\n$ `Deaths - Lower respiratory infections - Sex: Both - Age: All Ages (Number)`               <dbl> â€¦\n$ `Deaths - Neonatal disorders - Sex: Both - Age: All Ages (Number)`                         <dbl> â€¦\n$ `Deaths - Alcohol use disorders - Sex: Both - Age: All Ages (Number)`                      <dbl> â€¦\n$ `Deaths - Self-harm - Sex: Both - Age: All Ages (Number)`                                  <dbl> â€¦\n$ `Deaths - Exposure to forces of nature - Sex: Both - Age: All Ages (Number)`               <dbl> â€¦\n$ `Deaths - Diarrheal diseases - Sex: Both - Age: All Ages (Number)`                         <dbl> â€¦\n$ `Deaths - Environmental heat and cold exposure - Sex: Both - Age: All Ages (Number)`       <dbl> â€¦\n$ `Deaths - Neoplasms - Sex: Both - Age: All Ages (Number)`                                  <dbl> â€¦\n$ `Deaths - Conflict and terrorism - Sex: Both - Age: All Ages (Number)`                     <dbl> â€¦\n$ `Deaths - Diabetes mellitus - Sex: Both - Age: All Ages (Number)`                          <dbl> â€¦\n$ `Deaths - Chronic kidney disease - Sex: Both - Age: All Ages (Number)`                     <dbl> â€¦\n$ `Deaths - Poisonings - Sex: Both - Age: All Ages (Number)`                                 <dbl> â€¦\n$ `Deaths - Protein-energy malnutrition - Sex: Both - Age: All Ages (Number)`                <dbl> â€¦\n$ `Terrorism (deaths)`                                                                       <dbl> â€¦\n$ `Deaths - Road injuries - Sex: Both - Age: All Ages (Number)`                              <dbl> â€¦\n$ `Deaths - Chronic respiratory diseases - Sex: Both - Age: All Ages (Number)`               <dbl> â€¦\n$ `Deaths - Cirrhosis and other chronic liver diseases - Sex: Both - Age: All Ages (Number)` <dbl> â€¦\n$ `Deaths - Digestive diseases - Sex: Both - Age: All Ages (Number)`                         <dbl> â€¦\n$ `Deaths - Fire, heat, and hot substances - Sex: Both - Age: All Ages (Number)`             <dbl> â€¦\n$ `Deaths - Acute hepatitis - Sex: Both - Age: All Ages (Number)`                            <dbl> â€¦\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nunique(deaths$`Number of executions (Amnesty International)`)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"15\"    \"17\"    \"0\"     \"2\"     \"14\"    \"6\"     \"1\"     NA      \"5\"    \n[10] \"3\"     \"9\"     \"4\"     \"10\"    \"470\"   \">1000\" \"22\"    \"44\"    \"317\"  \n[19] \"346\"   \"388\"   \"252\"   \"360\"   \"314\"   \"369\"   \"289\"   \"977\"   \"156\"  \n[28] \"33\"    \"34\"    \"120\"   \"68\"    \"129\"   \"169\"   \"61\"    \"26\"    \"88\"   \n[37] \"7\"     \"8\"     \"11\"    \"18\"    \">1\"    \"60\"    \"30\"    \"135\"   \"36\"   \n[46] \"326\"   \"87\"    \"143\"   \"102\"   \"69\"    \"27\"    \"82\"    \"79\"    \"90\"   \n[55] \"158\"   \"154\"   \"25\"    \"19\"    \"21\"    \"23\"    \"42\"    \"37\"    \"52\"   \n[64] \"46\"    \"43\"    \"39\"    \"35\"    \"28\"    \"20\"    \"1248\"  \"2390\"  \"712\"  \n[73] \"521\"   \"670\"   \"680\"   \"767\"   \"603\"   \"1626\"  \"613\"   \"13\"    \"53\"   \n[82] \"41\"   \n```\n:::\n:::\n\n\n### Data wrangling\n\nKeeping in mind that the data applies to both sexes and all ages, I will clean up the column names. I will also remove 2 columns which \\*seem\\*\\* to be subsequently inserted into the dataser:\n\n-   `Number of executions (Amnesty International)` - most countries don't have death penalty and it's of character data type (e.g., \\>1000)\n\n-   `Terrorism (deaths)` - there is already a column `Deaths - Conflict and terrorism - Sex: Both - Age: All Ages (Number)` !\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndeaths_clean <- deaths %>% \n  select(-c('Number of executions (Amnesty International)', 'Terrorism (deaths)')) %>% \n  set_names(names(.) %>% str_remove_all(\"Deaths - | - Sex: Both - Age: All Ages \\\\(Number\\\\)\")) \n  \nglimpse(deaths_clean)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 7,273\nColumns: 34\n$ Entity                                       <chr> \"Afghanistan\", \"Afghanistâ€¦\n$ Code                                         <chr> \"AFG\", \"AFG\", \"AFG\", \"AFGâ€¦\n$ Year                                         <dbl> 2007, 2008, 2009, 2011, 2â€¦\n$ Meningitis                                   <dbl> 2933, 2731, 2460, 2327, 2â€¦\n$ `Alzheimer's disease and other dementias`    <dbl> 1402, 1424, 1449, 1508, 1â€¦\n$ `Parkinson's disease`                        <dbl> 450, 455, 460, 473, 482, â€¦\n$ `Nutritional deficiencies`                   <dbl> 2488, 2277, 2040, 1846, 1â€¦\n$ Malaria                                      <dbl> 393, 255, 239, 390, 94, 1â€¦\n$ Drowning                                     <dbl> 2127, 1973, 1852, 1775, 1â€¦\n$ `Interpersonal violence`                     <dbl> 3657, 3785, 3874, 4170, 4â€¦\n$ `Maternal disorders`                         <dbl> 4990, 5020, 5013, 4857, 4â€¦\n$ `HIV/AIDS`                                   <dbl> 148, 157, 167, 184, 191, â€¦\n$ `Drug use disorders`                         <dbl> 252, 261, 270, 292, 305, â€¦\n$ Tuberculosis                                 <dbl> 4995, 4790, 4579, 4259, 4â€¦\n$ `Cardiovascular diseases`                    <dbl> 53962, 54051, 53964, 5434â€¦\n$ `Lower respiratory infections`               <dbl> 27672, 25800, 24340, 2288â€¦\n$ `Neonatal disorders`                         <dbl> 23890, 23792, 23672, 2395â€¦\n$ `Alcohol use disorders`                      <dbl> 111, 114, 115, 120, 123, â€¦\n$ `Self-harm`                                  <dbl> 1310, 1330, 1342, 1391, 1â€¦\n$ `Exposure to forces of nature`               <dbl> 296, 1317, 101, 83, 333, â€¦\n$ `Diarrheal diseases`                         <dbl> 9320, 8275, 7359, 6412, 6â€¦\n$ `Environmental heat and cold exposure`       <dbl> 57, 57, 57, 58, 103, 58, â€¦\n$ Neoplasms                                    <dbl> 15925, 16148, 16383, 1709â€¦\n$ `Conflict and terrorism`                     <dbl> 8220, 6895, 7617, 9142, 1â€¦\n$ `Diabetes mellitus`                          <dbl> 3189, 3261, 3336, 3550, 3â€¦\n$ `Chronic kidney disease`                     <dbl> 4490, 4534, 4597, 4785, 4â€¦\n$ Poisonings                                   <dbl> 513, 495, 483, 483, 482, â€¦\n$ `Protein-energy malnutrition`                <dbl> 2439, 2231, 1998, 1805, 1â€¦\n$ `Road injuries`                              <dbl> 7425, 7355, 7290, 7432, 7â€¦\n$ `Chronic respiratory diseases`               <dbl> 7222, 7143, 7045, 6916, 6â€¦\n$ `Cirrhosis and other chronic liver diseases` <dbl> 3346, 3316, 3291, 3318, 3â€¦\n$ `Digestive diseases`                         <dbl> 6458, 6408, 6358, 6370, 6â€¦\n$ `Fire, heat, and hot substances`             <dbl> 481, 462, 448, 448, 445, â€¦\n$ `Acute hepatitis`                            <dbl> 3437, 3005, 2663, 2365, 2â€¦\n```\n:::\n:::\n\n\nRenaming certain columns for better readability and clarity.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndeaths_clean <- deaths_clean %>% \n  rename(\"Alzheimer's and other dementias\" = \"Alzheimer's disease and other dementias\",\n         \"Chronic liver diseases\" = \"Cirrhosis and other chronic liver diseases\",\n         \"Diabetes\" = \"Diabetes mellitus\", \n         \"Envir. heat and cold exposure\" = \"Environmental heat and cold exposure\",\n         \"Natural disasters\" = \"Exposure to forces of nature\",\n         \"Cancers\" = \"Neoplasms\")\n```\n:::\n\n\n### Visualizing missing values\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndeaths_clean %>% vis_miss()\n```\n\n::: {.cell-output-display}\n![](deaths-by-causes_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndeaths_clean %>% arrange(Code) %>% vis_miss()\n```\n\n::: {.cell-output-display}\n![](deaths-by-causes_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nWhat is *an **Entity and why each*** (every) entity\\*\\* doesn't have a Code?\n\nEntities with missing Code\n\n<details>\n\n<summary>Show code and output</summary>\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndeaths_clean %>% \n  filter(is.na(Code)) %>% \n  pull(Entity) %>% \n  unique()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"African Region (WHO)\"               \"Australasia & Oceania\"             \n [3] \"Bosnia-Herzegovina\"                 \"Central America & Caribbean\"       \n [5] \"Central Asia\"                       \"East Asia\"                         \n [7] \"East Asia & Pacific (WB)\"           \"East Germany (GDR)\"                \n [9] \"East Timor\"                         \"Eastern Europe\"                    \n[11] \"Eastern Mediterranean Region (WHO)\" \"England\"                           \n[13] \"Europe & Central Asia (WB)\"         \"European Region (WHO)\"             \n[15] \"G20\"                                \"International\"                     \n[17] \"Latin America & Caribbean (WB)\"     \"Macau\"                             \n[19] \"Middle East & North Africa\"         \"Middle East & North Africa (WB)\"   \n[21] \"North America\"                      \"North America (WB)\"                \n[23] \"Northern Ireland\"                   \"OECD Countries\"                    \n[25] \"Region of the Americas (WHO)\"       \"Scotland\"                          \n[27] \"Serbia-Montenegro\"                  \"South America\"                     \n[29] \"South Asia\"                         \"South Asia (WB)\"                   \n[31] \"South-East Asia Region (WHO)\"       \"Southeast Asia\"                    \n[33] \"Sub-Saharan Africa\"                 \"Sub-Saharan Africa (WB)\"           \n[35] \"Wales\"                              \"West Germany (FRG)\"                \n[37] \"Western Europe\"                     \"Western Pacific Region (WHO)\"      \n[39] \"World (excluding China)\"            \"World Bank High Income\"            \n[41] \"World Bank Low Income\"              \"World Bank Lower Middle Income\"    \n[43] \"World Bank Upper Middle Income\"     \"Zaire\"                             \n```\n:::\n:::\n\n\n</details>\n\nEntities without Code are aggregates. I am looking for the entity \"World\" and it's not **here**!\n\nEntities without missing Code\n\n<details>\n\n<summary>Show code and output</summary>\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndeaths_clean %>% \n  filter(!is.na(Code)) %>%   # Be aware: \"World\" entity has a code!! It's here!\n  pull(Entity) %>% \n  unique()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  [1] \"Afghanistan\"                      \"Albania\"                         \n  [3] \"Algeria\"                          \"American Samoa\"                  \n  [5] \"Andorra\"                          \"Angola\"                          \n  [7] \"Antigua and Barbuda\"              \"Argentina\"                       \n  [9] \"Armenia\"                          \"Australia\"                       \n [11] \"Austria\"                          \"Azerbaijan\"                      \n [13] \"Bahamas\"                          \"Bahrain\"                         \n [15] \"Bangladesh\"                       \"Barbados\"                        \n [17] \"Belarus\"                          \"Belgium\"                         \n [19] \"Belize\"                           \"Benin\"                           \n [21] \"Bermuda\"                          \"Bhutan\"                          \n [23] \"Bolivia\"                          \"Bosnia and Herzegovina\"          \n [25] \"Botswana\"                         \"Brazil\"                          \n [27] \"Brunei\"                           \"Bulgaria\"                        \n [29] \"Burkina Faso\"                     \"Burundi\"                         \n [31] \"Cambodia\"                         \"Cameroon\"                        \n [33] \"Canada\"                           \"Cape Verde\"                      \n [35] \"Central African Republic\"         \"Chad\"                            \n [37] \"Chile\"                            \"China\"                           \n [39] \"Colombia\"                         \"Comoros\"                         \n [41] \"Congo\"                            \"Cook Islands\"                    \n [43] \"Costa Rica\"                       \"Cote d'Ivoire\"                   \n [45] \"Croatia\"                          \"Cuba\"                            \n [47] \"Cyprus\"                           \"Czechia\"                         \n [49] \"Czechoslovakia\"                   \"Democratic Republic of Congo\"    \n [51] \"Denmark\"                          \"Djibouti\"                        \n [53] \"Dominica\"                         \"Dominican Republic\"              \n [55] \"Ecuador\"                          \"Egypt\"                           \n [57] \"El Salvador\"                      \"Equatorial Guinea\"               \n [59] \"Eritrea\"                          \"Estonia\"                         \n [61] \"Eswatini\"                         \"Ethiopia\"                        \n [63] \"Fiji\"                             \"Finland\"                         \n [65] \"France\"                           \"French Guiana\"                   \n [67] \"French Polynesia\"                 \"Gabon\"                           \n [69] \"Gambia\"                           \"Georgia\"                         \n [71] \"Germany\"                          \"Ghana\"                           \n [73] \"Greece\"                           \"Greenland\"                       \n [75] \"Grenada\"                          \"Guadeloupe\"                      \n [77] \"Guam\"                             \"Guatemala\"                       \n [79] \"Guinea\"                           \"Guinea-Bissau\"                   \n [81] \"Guyana\"                           \"Haiti\"                           \n [83] \"Honduras\"                         \"Hong Kong\"                       \n [85] \"Hungary\"                          \"Iceland\"                         \n [87] \"India\"                            \"Indonesia\"                       \n [89] \"Iran\"                             \"Iraq\"                            \n [91] \"Ireland\"                          \"Israel\"                          \n [93] \"Italy\"                            \"Jamaica\"                         \n [95] \"Japan\"                            \"Jordan\"                          \n [97] \"Kazakhstan\"                       \"Kenya\"                           \n [99] \"Kiribati\"                         \"Kosovo\"                          \n[101] \"Kuwait\"                           \"Kyrgyzstan\"                      \n[103] \"Laos\"                             \"Latvia\"                          \n[105] \"Lebanon\"                          \"Lesotho\"                         \n[107] \"Liberia\"                          \"Libya\"                           \n[109] \"Lithuania\"                        \"Luxembourg\"                      \n[111] \"Madagascar\"                       \"Malawi\"                          \n[113] \"Malaysia\"                         \"Maldives\"                        \n[115] \"Mali\"                             \"Malta\"                           \n[117] \"Marshall Islands\"                 \"Martinique\"                      \n[119] \"Mauritania\"                       \"Mauritius\"                       \n[121] \"Mexico\"                           \"Micronesia (country)\"            \n[123] \"Moldova\"                          \"Monaco\"                          \n[125] \"Mongolia\"                         \"Montenegro\"                      \n[127] \"Morocco\"                          \"Mozambique\"                      \n[129] \"Myanmar\"                          \"Namibia\"                         \n[131] \"Nauru\"                            \"Nepal\"                           \n[133] \"Netherlands\"                      \"New Caledonia\"                   \n[135] \"New Zealand\"                      \"Nicaragua\"                       \n[137] \"Niger\"                            \"Nigeria\"                         \n[139] \"Niue\"                             \"North Korea\"                     \n[141] \"North Macedonia\"                  \"Northern Mariana Islands\"        \n[143] \"Norway\"                           \"Oman\"                            \n[145] \"Pakistan\"                         \"Palau\"                           \n[147] \"Palestine\"                        \"Panama\"                          \n[149] \"Papua New Guinea\"                 \"Paraguay\"                        \n[151] \"Peru\"                             \"Philippines\"                     \n[153] \"Poland\"                           \"Portugal\"                        \n[155] \"Puerto Rico\"                      \"Qatar\"                           \n[157] \"Romania\"                          \"Russia\"                          \n[159] \"Rwanda\"                           \"Saint Kitts and Nevis\"           \n[161] \"Saint Lucia\"                      \"Saint Vincent and the Grenadines\"\n[163] \"Samoa\"                            \"San Marino\"                      \n[165] \"Sao Tome and Principe\"            \"Saudi Arabia\"                    \n[167] \"Senegal\"                          \"Serbia\"                          \n[169] \"Seychelles\"                       \"Sierra Leone\"                    \n[171] \"Singapore\"                        \"Slovakia\"                        \n[173] \"Slovenia\"                         \"Solomon Islands\"                 \n[175] \"Somalia\"                          \"South Africa\"                    \n[177] \"South Korea\"                      \"South Sudan\"                     \n[179] \"Spain\"                            \"Sri Lanka\"                       \n[181] \"Sudan\"                            \"Suriname\"                        \n[183] \"Sweden\"                           \"Switzerland\"                     \n[185] \"Syria\"                            \"Taiwan\"                          \n[187] \"Tajikistan\"                       \"Tanzania\"                        \n[189] \"Thailand\"                         \"Timor\"                           \n[191] \"Togo\"                             \"Tokelau\"                         \n[193] \"Tonga\"                            \"Trinidad and Tobago\"             \n[195] \"Tunisia\"                          \"Turkey\"                          \n[197] \"Turkmenistan\"                     \"Tuvalu\"                          \n[199] \"USSR\"                             \"Uganda\"                          \n[201] \"Ukraine\"                          \"United Arab Emirates\"            \n[203] \"United Kingdom\"                   \"United States\"                   \n[205] \"United States Virgin Islands\"     \"Uruguay\"                         \n[207] \"Uzbekistan\"                       \"Vanuatu\"                         \n[209] \"Venezuela\"                        \"Vietnam\"                         \n[211] \"Wallis and Futuna\"                \"Western Sahara\"                  \n[213] \"World\"                            \"Yemen\"                           \n[215] \"Yugoslavia\"                       \"Zambia\"                          \n[217] \"Zimbabwe\"                        \n```\n:::\n:::\n\n\n</details>\n\nWe have countries here. This subset also includes \"World\". Be careful to filter out \"World\" entity if you explore countries!\n\nSome rows have Code but missing data on all Deaths.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndeaths_clean %>% \n  filter(!is.na(Code), is.na(Cancers)) %>% pull(Entity) %>% unique()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"Czechoslovakia\"    \"French Guiana\"     \"French Polynesia\" \n [4] \"Guadeloupe\"        \"Hong Kong\"         \"Kosovo\"           \n [7] \"Martinique\"        \"New Caledonia\"     \"USSR\"             \n[10] \"Wallis and Futuna\" \"Western Sahara\"    \"Yugoslavia\"       \n```\n:::\n:::\n\n\nSome entities doesn't exist anymore. I'll leave it as it is.\n\nDefining cause of death categories\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndisease <- c(\"Acute hepatitis\",\n             \"Alzheimer's and other dementias\", \n             \"Cancers\",\n             \"Cardiovascular diseases\",\n             \"Chronic kidney disease\",\n             \"Chronic respiratory diseases\", \n             \"Chronic liver diseases\",\n             \"Diabetes\", \n             \"Diarrheal diseases\",\n             \"Digestive diseases\",\n             \"HIV/AIDS\",\n             \"Lower respiratory infections\",\n             \"Malaria\",\n             \"Maternal disorders\",\n             \"Meningitis\",\n             \"Neonatal disorders\",\n             \"Nutritional deficiencies\",\n             \"Parkinson's disease\",\n             \"Protein-energy malnutrition\",\n             \"Tuberculosis\")\n\nhuman_natur <- c(\"Alcohol use disorders\",\n                 \"Conflict and terrorism\", \n                 \"Drug use disorders\",\n                 \"Interpersonal violence\",\n                 \"Self-harm\")\n\naccident <- c(\"Drowning\",\n              \"Envir. heat and cold exposure\",\n              \"Fire, heat, and hot substances\",\n              \"Natural disasters\",\n              \"Poisonings\",\n              \"Road injuries\")\n```\n:::\n\n\nSome more data manipulation to get the dataset ready for analysis. (?)\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndeaths_clean <- deaths_clean %>% \n  pivot_longer(cols = -c(Entity, Code, Year), names_to = \"Cause\", values_to = \"Deaths\") %>% \n  mutate(Category = case_when(\n    Cause %in% disease ~ \"Disease\",\n    Cause %in% human_natur ~ \"Human natur\" ,\n    Cause %in% accident ~ \"Accident\" )) %>% \n  select(1:4, 6, 5)\n\ndeaths_clean \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 225,463 Ã— 6\n   Entity      Code   Year Cause                           Category    Deaths\n   <chr>       <chr> <dbl> <chr>                           <chr>        <dbl>\n 1 Afghanistan AFG    2007 Meningitis                      Disease       2933\n 2 Afghanistan AFG    2007 Alzheimer's and other dementias Disease       1402\n 3 Afghanistan AFG    2007 Parkinson's disease             Disease        450\n 4 Afghanistan AFG    2007 Nutritional deficiencies        Disease       2488\n 5 Afghanistan AFG    2007 Malaria                         Disease        393\n 6 Afghanistan AFG    2007 Drowning                        Accident      2127\n 7 Afghanistan AFG    2007 Interpersonal violence          Human natur   3657\n 8 Afghanistan AFG    2007 Maternal disorders              Disease       4990\n 9 Afghanistan AFG    2007 HIV/AIDS                        Disease        148\n10 Afghanistan AFG    2007 Drug use disorders              Human natur    252\n# â€¦ with 225,453 more rows\n```\n:::\n:::\n\n\n## ðŸ“Š Trends in Death rate by Cause, World, 1990-2019\n\nOur metric for this visualization will be death rate per year, measured as the annual number of deaths per 100,000 individuals, Therefore, we need a dataset with world's total populations from 1990 - 2019. It is obtained from [The World Bank](https://databank.worldbank.org/source/world-development-indicators##) and prepared in Excel.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nworld_pop <- read_csv(\"data/world_pop_1990-2019.csv\")\n\nworld_pop\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 30 Ã— 3\n   Entity  Year Population\n   <chr>  <dbl>      <dbl>\n 1 World   1990 5280062644\n 2 World   1991 5368139818\n 3 World   1992 5452576967\n 4 World   1993 5537885402\n 5 World   1994 5622085293\n 6 World   1995 5706753581\n 7 World   1996 5789655178\n 8 World   1997 5872284397\n 9 World   1998 5954004340\n10 World   1999 6034484369\n# â€¦ with 20 more rows\n```\n:::\n:::\n\n\n### Data manipulation\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntrends_world <- deaths_clean %>% \n  filter(Entity == \"World\") %>% \n  left_join(world_pop, by = c(\"Entity\" = \"Entity\", \"Year\" = \"Year\")) %>%\n  mutate(`Death rate` = round(Deaths / Population * 1e+05, 2))\n\ntrends_world\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 930 Ã— 8\n   Entity Code      Year Cause                    Categâ€¦Â¹ Deaths Populâ€¦Â² Deathâ€¦Â³\n   <chr>  <chr>    <dbl> <chr>                    <chr>    <dbl>   <dbl>   <dbl>\n 1 World  OWID_WRL  1990 Meningitis               Disease 432524  5.28e9    8.19\n 2 World  OWID_WRL  1990 Alzheimer's and other dâ€¦ Disease 560935  5.28e9   10.6 \n 3 World  OWID_WRL  1990 Parkinson's disease      Disease 147238  5.28e9    2.79\n 4 World  OWID_WRL  1990 Nutritional deficiencies Disease 757152  5.28e9   14.3 \n 5 World  OWID_WRL  1990 Malaria                  Disease 840553  5.28e9   15.9 \n 6 World  OWID_WRL  1990 Drowning                 Accideâ€¦ 460665  5.28e9    8.72\n 7 World  OWID_WRL  1990 Interpersonal violence   Human â€¦ 373124  5.28e9    7.07\n 8 World  OWID_WRL  1990 Maternal disorders       Disease 302586  5.28e9    5.73\n 9 World  OWID_WRL  1990 HIV/AIDS                 Disease 336387  5.28e9    6.37\n10 World  OWID_WRL  1990 Drug use disorders       Human â€¦  56144  5.28e9    1.06\n# â€¦ with 920 more rows, and abbreviated variable names Â¹â€‹Category, Â²â€‹Population,\n#   Â³â€‹`Death rate`\n```\n:::\n:::\n\n\n### Data visualization\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntrends_world %>% \n  ggplot(aes(Year, `Death rate`, color = Category)) +\n  geom_line(size = 0.7) + \n  facet_wrap(~ Cause, scales = \"free_y\", ncol = 3) + \n  labs(title = \"Trends in Death rate by Cause, World, 1990-2019\", \n       subtitle = \"Death rate (per 100,000 individuals per year)\",\n       caption = \"Data Source: Our World in Data\") +\n  theme_classic() + \n  theme(legend.position = \"top\")\n```\n\n::: {.cell-output-display}\n![](deaths-by-causes_files/figure-html/unnamed-chunk-15-1.png){width=768}\n:::\n:::\n\n\n## ðŸ“Š Total Deaths by Cause, World, 2019\n\nWe will now see how many people died from a particular cause in 2019.\n\nOur metric for this visualization will be number of deaths.\n\n### Data manipulation\n\n\n::: {.cell}\n\n```{.r .cell-code}\nworld_2019 <- deaths_clean %>% \n  filter(Year == 2019 & Entity == \"World\") %>% \n  mutate(Percent = scales::percent(Deaths / sum(Deaths), accuracy = 0.1),\n         Cause = as_factor(Cause) %>% fct_reorder(Deaths)) %>% \n  arrange(desc(Deaths))\n\nworld_2019 %>% \n  mutate(Deaths = scales::comma(Deaths, scale = 1e-06, suffix = \"M\", accuracy = 0.01)) %>% \n  print(n=Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 31 Ã— 7\n   Entity Code      Year Cause                           Category Deaths Percent\n   <chr>  <chr>    <dbl> <fct>                           <chr>    <chr>  <chr>  \n 1 World  OWID_WRL  2019 Cardiovascular diseases         Disease  18.56M 34.1%  \n 2 World  OWID_WRL  2019 Cancers                         Disease  10.08M 18.5%  \n 3 World  OWID_WRL  2019 Chronic respiratory diseases    Disease  3.97M  7.3%   \n 4 World  OWID_WRL  2019 Digestive diseases              Disease  2.56M  4.7%   \n 5 World  OWID_WRL  2019 Lower respiratory infections    Disease  2.49M  4.6%   \n 6 World  OWID_WRL  2019 Neonatal disorders              Disease  1.88M  3.5%   \n 7 World  OWID_WRL  2019 Alzheimer's and other dementias Disease  1.62M  3.0%   \n 8 World  OWID_WRL  2019 Diabetes                        Disease  1.55M  2.9%   \n 9 World  OWID_WRL  2019 Diarrheal diseases              Disease  1.53M  2.8%   \n10 World  OWID_WRL  2019 Chronic liver diseases          Disease  1.47M  2.7%   \n11 World  OWID_WRL  2019 Chronic kidney disease          Disease  1.43M  2.6%   \n12 World  OWID_WRL  2019 Road injuries                   Accident 1.20M  2.2%   \n13 World  OWID_WRL  2019 Tuberculosis                    Disease  1.18M  2.2%   \n14 World  OWID_WRL  2019 HIV/AIDS                        Disease  0.86M  1.6%   \n15 World  OWID_WRL  2019 Self-harm                       Human nâ€¦ 0.76M  1.4%   \n16 World  OWID_WRL  2019 Malaria                         Disease  0.64M  1.2%   \n17 World  OWID_WRL  2019 Interpersonal violence          Human nâ€¦ 0.42M  0.8%   \n18 World  OWID_WRL  2019 Parkinson's disease             Disease  0.36M  0.7%   \n19 World  OWID_WRL  2019 Nutritional deficiencies        Disease  0.25M  0.5%   \n20 World  OWID_WRL  2019 Drowning                        Accident 0.24M  0.4%   \n21 World  OWID_WRL  2019 Meningitis                      Disease  0.24M  0.4%   \n22 World  OWID_WRL  2019 Protein-energy malnutrition     Disease  0.21M  0.4%   \n23 World  OWID_WRL  2019 Maternal disorders              Disease  0.20M  0.4%   \n24 World  OWID_WRL  2019 Alcohol use disorders           Human nâ€¦ 0.17M  0.3%   \n25 World  OWID_WRL  2019 Drug use disorders              Human nâ€¦ 0.13M  0.2%   \n26 World  OWID_WRL  2019 Fire, heat, and hot substances  Accident 0.11M  0.2%   \n27 World  OWID_WRL  2019 Acute hepatitis                 Disease  0.08M  0.1%   \n28 World  OWID_WRL  2019 Poisonings                      Accident 0.08M  0.1%   \n29 World  OWID_WRL  2019 Conflict and terrorism          Human nâ€¦ 0.06M  0.1%   \n30 World  OWID_WRL  2019 Envir. heat and cold exposure   Accident 0.05M  0.1%   \n31 World  OWID_WRL  2019 Natural disasters               Accident 0.01M  0.0%   \n```\n:::\n:::\n\n\n### Data visualization\n\n\n::: {.cell preview='true'}\n\n```{.r .cell-code}\nworld_2019 %>% \n  ggplot(aes(Deaths, Cause, fill = Category)) +\n  geom_col(width = 0.7) +\n  geom_text(aes(label = scales::comma(Deaths, scale = 1e-06, suffix = \"M\", accuracy = 0.01), \n                hjust = -0.2), size = 3) +\n  scale_x_continuous(sec.axis = sec_axis(trans = ~./sum(world_2019$Deaths), \n                                         name=\"Proportion\", \n                                         labels = scales::percent),\n                     labels = scales::comma_format(scale = 1e-06, suffix = \"M\")) +\n  labs(title = \"Total Deaths by Cause, World, 2019\", \n       caption = \"Data Source: Our World in Data\") +\n  expand_limits(x = 2.1e+07) + \n  theme_bw() +\n  theme(legend.position = \"top\",\n        panel.grid.major = element_blank(),\n        panel.grid.minor = element_blank()) \n```\n\n::: {.cell-output-display}\n![](deaths-by-causes_files/figure-html/unnamed-chunk-17-1.png){width=768}\n:::\n:::\n\n\n### Key facts\n\n> Cardiovascular diseases are the leading cause of death globally. An estimated 18.6 million people died from CVDs in 2019, representing 34,1% of all global deaths. Of these deaths, 85% were due to heart attack and stroke. Over three quarters of CVD deaths take place in low- and middle-income countries. Most cardiovascular diseases can be prevented by addressing behavioural risk factors such as tobacco use, unhealthy diet and obesity, physical inactivity and harmful use of alcohol. (or nearly one in three deaths.)\n\n(https://www.who.int/news-room/fact-sheets/detail/cardiovascular-diseases-(cvds))\n\n> The second biggest cause are cancers.\n\n## ðŸ“Š Breakdown by WHO regions, 2019\n\n### Data manipulation\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndeaths_WHO_regions <- deaths_clean %>% \n  filter(str_detect(Entity, \"\\\\(WHO\\\\)\") & Year == 2019) %>% \n  select(-c(Code, Category)) %>% \n  group_by(Entity) %>% \n  arrange(Entity, desc(Deaths)) %>% \n  mutate(Rank = row_number()) %>% \n  filter(Rank <= 5)\n  \nDT::datatable(deaths_WHO_regions)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-1f018debbd611eebad3d\" style=\"width:100%;height:auto;\" class=\"datatables html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-1f018debbd611eebad3d\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\"],[\"African Region (WHO)\",\"African Region (WHO)\",\"African Region (WHO)\",\"African Region (WHO)\",\"African Region (WHO)\",\"Eastern Mediterranean Region (WHO)\",\"Eastern Mediterranean Region (WHO)\",\"Eastern Mediterranean Region (WHO)\",\"Eastern Mediterranean Region (WHO)\",\"Eastern Mediterranean Region (WHO)\",\"European Region (WHO)\",\"European Region (WHO)\",\"European Region (WHO)\",\"European Region (WHO)\",\"European Region (WHO)\",\"Region of the Americas (WHO)\",\"Region of the Americas (WHO)\",\"Region of the Americas (WHO)\",\"Region of the Americas (WHO)\",\"Region of the Americas (WHO)\",\"South-East Asia Region (WHO)\",\"South-East Asia Region (WHO)\",\"South-East Asia Region (WHO)\",\"South-East Asia Region (WHO)\",\"South-East Asia Region (WHO)\",\"Western Pacific Region (WHO)\",\"Western Pacific Region (WHO)\",\"Western Pacific Region (WHO)\",\"Western Pacific Region (WHO)\",\"Western Pacific Region (WHO)\"],[2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019],[\"Cardiovascular diseases\",\"Neonatal disorders\",\"Lower respiratory infections\",\"HIV/AIDS\",\"Malaria\",\"Cardiovascular diseases\",\"Cancers\",\"Neonatal disorders\",\"Digestive diseases\",\"Lower respiratory infections\",\"Cardiovascular diseases\",\"Cancers\",\"Digestive diseases\",\"Alzheimer's and other dementias\",\"Chronic respiratory diseases\",\"Cardiovascular diseases\",\"Cancers\",\"Chronic respiratory diseases\",\"Digestive diseases\",\"Lower respiratory infections\",\"Cardiovascular diseases\",\"Cancers\",\"Chronic respiratory diseases\",\"Diarrheal diseases\",\"Digestive diseases\",\"Cardiovascular diseases\",\"Cancers\",\"Chronic respiratory diseases\",\"Alzheimer's and other dementias\",\"Digestive diseases\"],[1085321,749955,662060,635623,590252,1374977,477361,365459,193249,176015,4213688,2260409,452555,417167,398681,2130471,1622270,449174,402205,322980,4004479,1519162,1494723,745072,718114,5709784,3632974,1270287,559566,461645],[1,2,3,4,5,1,2,3,4,5,1,2,3,4,5,1,2,3,4,5,1,2,3,4,5,1,2,3,4,5]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>Entity<\\/th>\\n      <th>Year<\\/th>\\n      <th>Cause<\\/th>\\n      <th>Deaths<\\/th>\\n      <th>Rank<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[2,4,5]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n### Data visualization\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndeaths_WHO_regions %>% \n  ggplot(aes(Cause, Deaths, fill = Cause)) +\n  geom_col(width = 0.7) +\n  facet_wrap(~Entity) +\n  scale_fill_viridis_d() +\n  scale_y_continuous(labels = scales::comma_format(scale = 1e-06, suffix = \"M\")) +\n  expand_limits(y = 6e+06) +\n  labs(title = \"Top 5 causes of death by WHO regions, 2019\") +\n  theme_bw() +\n  theme(legend.position = \"none\",\n        panel.grid.major = element_blank(),\n        panel.grid.minor = element_blank(),\n        strip.background = element_rect(fill = \"white\"),\n        axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](deaths-by-causes_files/figure-html/unnamed-chunk-19-1.png){width=768}\n:::\n:::\n\n\n## ðŸ“Š Breakdown by income level, 2019\n\n### Data manipulation\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndeaths_income_level <- deaths_clean %>% \n  filter(str_detect(Entity, \"Income\") & Year == 2019) %>% \n  select(-c(Code, Category)) %>% \n  mutate(Entity = Entity %>% as_factor() %>% fct_relevel(\"World Bank High Income\", after = 3)) %>% \n  group_by(Entity) %>% \n  arrange(Entity, desc(Deaths)) %>% \n  mutate(Rank = row_number()) %>% \n  ungroup() %>% \n  filter(Rank <= 5)\n  \nDT::datatable(deaths_income_level)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-cf51e96b30e2f3cdaf7b\" style=\"width:100%;height:auto;\" class=\"datatables html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-cf51e96b30e2f3cdaf7b\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\"],[\"World Bank Low Income\",\"World Bank Low Income\",\"World Bank Low Income\",\"World Bank Low Income\",\"World Bank Low Income\",\"World Bank Lower Middle Income\",\"World Bank Lower Middle Income\",\"World Bank Lower Middle Income\",\"World Bank Lower Middle Income\",\"World Bank Lower Middle Income\",\"World Bank Upper Middle Income\",\"World Bank Upper Middle Income\",\"World Bank Upper Middle Income\",\"World Bank Upper Middle Income\",\"World Bank Upper Middle Income\",\"World Bank High Income\",\"World Bank High Income\",\"World Bank High Income\",\"World Bank High Income\",\"World Bank High Income\"],[2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019,2019],[\"Cardiovascular diseases\",\"Neonatal disorders\",\"Lower respiratory infections\",\"Cancers\",\"Diarrheal diseases\",\"Cardiovascular diseases\",\"Cancers\",\"Chronic respiratory diseases\",\"Neonatal disorders\",\"Digestive diseases\",\"Cardiovascular diseases\",\"Cancers\",\"Chronic respiratory diseases\",\"Digestive diseases\",\"Alzheimer's and other dementias\",\"Cardiovascular diseases\",\"Cancers\",\"Alzheimer's and other dementias\",\"Chronic respiratory diseases\",\"Digestive diseases\"],[792037,478720,411796,368474,334806,6291011,2268203,1709153,1205270,1116675,7943909,4305756,1455296,732989,604357,3525196,3131800,678988,625560,501679],[1,2,3,4,5,1,2,3,4,5,1,2,3,4,5,1,2,3,4,5]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>Entity<\\/th>\\n      <th>Year<\\/th>\\n      <th>Cause<\\/th>\\n      <th>Deaths<\\/th>\\n      <th>Rank<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[2,4,5]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n### Data visualization\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndeaths_income_level %>% \n  ggplot(aes(Cause, Deaths, fill = Cause)) +\n  geom_col(width = 0.7) +\n  facet_wrap(~Entity) +\n  scale_fill_viridis_d() +\n  scale_y_continuous(labels = scales::comma_format(scale = 1e-06, suffix = \"M\")) +\n  labs(title = \"Top 5 causes of death by income level, 2019\") +\n  theme_bw() +\n  theme(legend.position = \"none\",\n        panel.grid.major = element_blank(),\n        panel.grid.minor = element_blank(),\n        strip.background = element_rect(fill = \"white\"),\n        axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](deaths-by-causes_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "deaths-by-causes_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js\"></script>\r\n<link href=\"../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/datatables-binding-0.23/datatables.js\"></script>\r\n<script src=\"../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\r\n<link href=\"../../site_libs/dt-core-1.11.3/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\r\n<link href=\"../../site_libs/dt-core-1.11.3/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/dt-core-1.11.3/js/jquery.dataTables.min.js\"></script>\r\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}