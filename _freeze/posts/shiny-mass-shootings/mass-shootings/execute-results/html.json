{
  "hash": "bed1563e5a9d699c4c434f1b8b515f55",
  "result": {
    "markdown": "---\ntitle: \"Shiny App - Mass Shootings in the USA\"\ndescription: \"EDA with Shiny app on mass shootings between August 20th, 1982 and December 31st, 2024.\"\ndate: \"2023-03-01\"\ncategories: \n  - r\n  - shiny\n  - eda\n  - data cleaning\n  - data wrangling\nimage: images/preview.png\n---\n\n\n::: {.callout-note appearance=\"simple\"}\nThis post will be regularly updated with each new case.\n\nLast update on January 9, 2025.\n:::\n\n<br/>\n\n## Introduction\n\nMass shootings have been a topic of intense discussion in the United States. A public \"database\" of mass shootings since 1982 has been made available by the [Mother Jones](https://www.motherjones.com/politics/2012/12/mass-shootings-mother-jones-full-data/), a non-profit organization. This \"database\" is stored in a Google spreadsheet. You can access it [here](https://docs.google.com/spreadsheets/d/1b9o6uDO18sLxBqPwl_Gh9bnhW-ev_dABH83M5Vb5L8o/edit#gid=0) and download as a CSV file.\n\nThere are many definitions of mass shooting. Here is what [Britannica](https://www.britannica.com/topic/mass-shooting) has to say:\n\n> ***Mass shooting**, also called **active shooter incident**, as defined by the U.S. [Federal Bureau of Investigation](https://www.britannica.com/topic/Federal-Bureau-of-Investigation) (FBI), an event in which one or more individuals are \"**actively engaged in killing or attempting to kill people in a populated area.** Implicit in this definition is the shooter's use of a firearm.\" The FBI has not set a minimum number of casualties to qualify an event as a mass shooting, but U.S. statute (the Investigative Assistance for Violent Crimes Act of 2012) defines a \"mass killing\" as **\"3 or more killings in a single incident\".***\n\n## Data overview\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidygeocoder)\nlibrary(plotly)\ntheme_set(theme_classic())\n\nmass_shootings <- read_csv(\"data/mass_shootings_usa_1982-2024.csv\")\n\nmass_shootings %>% glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 151\nColumns: 24\n$ case                             <chr> \"Apalachee High School shooting\", \"Ar‚Ä¶\n$ location...2                     <chr> \"Winder, Georgia\", \"Fordyce, Arkansas‚Ä¶\n$ date                             <chr> \"9/4/24\", \"6/21/24\", \"12/6/23\", \"10/2‚Ä¶\n$ summary                          <chr> \"Colt Gray, 14, was apprehended by re‚Ä¶\n$ fatalities                       <dbl> 4, 4, 3, 18, 3, 3, 5, 3, 8, 5, 6, 3, ‚Ä¶\n$ injured                          <dbl> 9, 10, 1, 13, 0, 6, 2, 6, 7, 8, 6, 5,‚Ä¶\n$ total_victims                    <dbl> 13, 14, 4, 31, 3, 9, 7, 9, 15, 13, 12‚Ä¶\n$ location...8                     <chr> \"School\", \"workplace\", \"School\", \"Oth‚Ä¶\n$ age_of_shooter                   <chr> \"14\", \"44\", \"67\", \"40\", \"21\", \"59\", \"‚Ä¶\n$ prior_signs_mental_health_issues <chr> \"yes\", \"-\", \"-\", \"yes\", \"yes\", \"-\", \"‚Ä¶\n$ mental_health_details            <chr> \"-\", \"-\", \"-\", \"Card reportedly spoke‚Ä¶\n$ weapons_obtained_legally         <chr> \"-\", \"-\", \"-\", \"-\", \"yes\", \"-\", \"yes\"‚Ä¶\n$ where_obtained                   <chr> \"-\", \"-\", \"-\", \"Yes\", \"local gun stor‚Ä¶\n$ weapon_type                      <chr> \"semiautomatic rifle\", \"shotgun; semi‚Ä¶\n$ weapon_details                   <chr> \"AR-15\", \"12-gauge shotgun\", \"-\", \"AR‚Ä¶\n$ race                             <chr> \"White\", \"White\", \"White\", \"White\", \"‚Ä¶\n$ gender                           <chr> \"M\", \"M\", \"M\", \"M\", \"M\", \"M\", \"M\", \"M‚Ä¶\n$ sources                          <chr> \"https://www.nbcnews.com/news/us-news‚Ä¶\n$ mental_health_sources            <chr> \"https://www.washingtonpost.com/natio‚Ä¶\n$ sources_additional_age           <chr> \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-‚Ä¶\n$ latitude                         <chr> \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-‚Ä¶\n$ longitude                        <chr> \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-‚Ä¶\n$ type                             <chr> \"mass\", \"mass\", \"mass\", \"Spree\", \"mas‚Ä¶\n$ year                             <dbl> 2024, 2024, 2023, 2023, 2023, 2023, 2‚Ä¶\n```\n:::\n:::\n\n\nWe have 151 cases, described with 24 variables. At first glance, this dataset clearly needs extensive cleaning.\n\n## Data cleaning\n\n### üßπ Step 1. Initial cleaning\n\nThe first cleaning step includes:\n\n-   selecting columns of interest,\n-   replacing the character value `\"-\"` with `NA` in all columns with character data type,\n-   converting `date` column from character to date data type,\n-   renaming location columns,\n-   converting character data type to numeric for specific columns.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmass_shootings_cln <- mass_shootings %>% \n  select(1:6, 8:10, 12, 16, 17, 21:24) %>% \n  mutate(across(where(is.character), ~na_if(., \"-\"))) %>% \n  mutate(date = lubridate::mdy(date)) %>% \n  rename(location = location...2, location_2 = location...8) %>% \n  mutate_at(c(\"injured\", \"age_of_shooter\", \"latitude\", \"longitude\"), as.numeric)\n  \nmass_shootings_cln %>% glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 151\nColumns: 16\n$ case                             <chr> \"Apalachee High School shooting\", \"Ar‚Ä¶\n$ location                         <chr> \"Winder, Georgia\", \"Fordyce, Arkansas‚Ä¶\n$ date                             <date> 2024-09-04, 2024-06-21, 2023-12-06, ‚Ä¶\n$ summary                          <chr> \"Colt Gray, 14, was apprehended by re‚Ä¶\n$ fatalities                       <dbl> 4, 4, 3, 18, 3, 3, 5, 3, 8, 5, 6, 3, ‚Ä¶\n$ injured                          <dbl> 9, 10, 1, 13, 0, 6, 2, 6, 7, 8, 6, 5,‚Ä¶\n$ location_2                       <chr> \"School\", \"workplace\", \"School\", \"Oth‚Ä¶\n$ age_of_shooter                   <dbl> 14, 44, 67, 40, 21, 59, 40, 18, 33, 2‚Ä¶\n$ prior_signs_mental_health_issues <chr> \"yes\", NA, NA, \"yes\", \"yes\", NA, \"yes‚Ä¶\n$ weapons_obtained_legally         <chr> NA, NA, NA, NA, \"yes\", NA, \"yes\", \"ye‚Ä¶\n$ race                             <chr> \"White\", \"White\", \"White\", \"White\", \"‚Ä¶\n$ gender                           <chr> \"M\", \"M\", \"M\", \"M\", \"M\", \"M\", \"M\", \"M‚Ä¶\n$ latitude                         <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, N‚Ä¶\n$ longitude                        <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, N‚Ä¶\n$ type                             <chr> \"mass\", \"mass\", \"mass\", \"Spree\", \"mas‚Ä¶\n$ year                             <dbl> 2024, 2024, 2023, 2023, 2023, 2023, 2‚Ä¶\n```\n:::\n:::\n\n\nüîé Are there any duplicates? No.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(duplicated(mass_shootings))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0\n```\n:::\n:::\n\n\nüîé Number of missing values, `NA`, per column.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmass_shootings_cln %>% \n  summarise_all(~sum(is.na(.))) %>% \n  # transposing for better visibility\n  pivot_longer(cols = everything(), names_to = \"column\", values_to = \"n_missing\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 16 √ó 2\n   column                           n_missing\n   <chr>                                <int>\n 1 case                                     0\n 2 location                                 0\n 3 date                                     0\n 4 summary                                  0\n 5 fatalities                               0\n 6 injured                                  0\n 7 location_2                               0\n 8 age_of_shooter                           2\n 9 prior_signs_mental_health_issues        31\n10 weapons_obtained_legally                21\n11 race                                    12\n12 gender                                   0\n13 latitude                                25\n14 longitude                               25\n15 type                                     0\n16 year                                     0\n```\n:::\n:::\n\n\n25 of the most recent cases don't have location coordinates at all. We'll address this in the final cleanup step.\n\n### üßπ Step 2. Fixing unique values of categorical variables\n\nüîé Let's take a look at the unique values of the `gender` column.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmass_shootings_cln %>% \n  count(gender, sort = TRUE) \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 √ó 2\n  gender                                                                       n\n  <chr>                                                                    <int>\n1 \"M\"                                                                         75\n2 \"Male\"                                                                      70\n3 \"Female\"                                                                     2\n4 \"Male & Female\"                                                              2\n5 \"F\"                                                                          1\n6 \"F (\\\"identifies as transgender\\\" and \\\"Audrey Hale is a biological wom‚Ä¶     1\n```\n:::\n:::\n\n\nAlmost all categorical variables need unique values correction.\n\nTo make a long story short, I'll correct them all in one step using `case_when` function, and we'll look at them later during the analysis.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmass_shootings_cln <- mass_shootings_cln %>% \n  mutate(gender = case_when(gender == \"F\" ~ \"Female\",\n                            gender == \"M\" ~ \"Male\", \n                            gender == \"(see summary)\" ~ \"Male\",\n                            gender %>% str_detect(\"transgender\")~\"Female (transgender)\",\n                            TRUE ~ gender),\n         race = case_when(race == \"white\" ~ \"White\",\n                          race == \"black\" ~ \"Black\",\n                          race == \"unclear\" ~ \"Unclear\",\n                          TRUE ~ race),\n         location_2 = \n           case_when(location_2 %in% c(\"workplace\", \"\\nWorkplace\") ~ \"Workplace\",\n                                location_2 == \"Other\\n\" ~ \"Other\",\n                                location_2 == \"religious\" ~ \"Religious\",\n                                TRUE ~ location_2),\n         prior_signs_mental_health_issues = \n           case_when(prior_signs_mental_health_issues == \"yes\" ~ \"Yes\",\n                     prior_signs_mental_health_issues == \"TBD\" ~ \"To be determined\",\n                     TRUE ~ prior_signs_mental_health_issues),\n         weapons_obtained_legally = \n           case_when(weapons_obtained_legally %in% c(\"yes\", \"\\nYes\") ~ \"Yes\",\n                     weapons_obtained_legally == \"TBD\" ~ \"To be determined\",\n                     weapons_obtained_legally %>% str_detect(\"Kelley\") ~ \"Unknown\",\n                     weapons_obtained_legally %>% str_detect(\"some\") ~ \"Partially\",\n                     TRUE ~ weapons_obtained_legally), \n         type = case_when(type == \"mass\" ~ \"Mass\",\n                          TRUE ~ type))\n```\n:::\n\n\n### üßπ Step 3. Geocoding locations with missing coordinates\n\nThere are 25 cases with missing location coordinates. In this step we'll convert locations to coordinates with geocoding. and use them later to create a `leaflet` map for a `shiny app`.\n\nThe `tidygeocoder` package provides geocoding services. It's designed to work easily with the `tidyverse.` It also provides access to several different geocoding services, including [LocationIQ](https://locationiq.com/) which I'm going to use here. LocationIQ is a freemium service that provides a free tier, which doesn't require you to give them your billing details. When you sign up to LocationIQ, they'll take you to the Manage Your API Access Tokens page, which is where we obtain our API token. Next, you need to provide the `tidygeocoder` package with your API key.\n\nYou can also use the [Nominatim (\"osm\")](https://nominatim.org/) geocoding service (OpenStreetMap) which can be specified with the method argument (`method = \"osm\"`). I found LocationIQ to be faster.\n\nThe first step is to select only locations with missing coordinates and geocode them.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngeocoded_locations <- mass_shootings_cln %>% \n  filter(is.na(latitude) | is.na(longitude)) %>% \n  select(location) %>% \n  geocode(location, method = \"iq\")\n\ngeocoded_locations %>% \n  mutate(across(where(is.numeric), ~ num(., digits = 6)))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 25 √ó 3\n   location                         lat        long\n   <chr>                      <num:.6!>   <num:.6!>\n 1 Winder, Georgia            33.991908  -83.718437\n 2 Fordyce, Arkansas          33.813716  -92.412930\n 3 Las Vegas, Nevada          36.167256 -115.148516\n 4 Lewiston, Maine            44.100452  -70.215029\n 5 Jacksonville, Florida      30.332184  -81.655651\n 6 Trabuco Canyon, California 33.662623 -117.589380\n 7 Philadelphia, Pennsylvania 39.952724  -75.163526\n 8 Farmington, New Mexico     36.729115 -108.205445\n 9 Allen, Texas               33.103174  -96.670550\n10 Louisville, Kentucky       38.254238  -85.759407\n# ‚Ñπ 15 more rows\n```\n:::\n:::\n\n\nThe next step is to join mass shootings table with geocoded locations and replace missing latitudes and longitudes with geocoded.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmass_shootings_cln <- mass_shootings_cln %>% \n  left_join(geocoded_locations, by = \"location\") %>% \n  mutate(latitude = ifelse(is.na(latitude), lat, latitude),\n         longitude = ifelse(is.na(longitude), long, longitude))\n```\n:::\n\n\nüîé Checking for null values.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(is.na(mass_shootings_cln$latitude))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(is.na(mass_shootings_cln$longitude))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0\n```\n:::\n:::\n\n\nOK, this looks fine.\n\n## Exploratory data analysis (EDA)\n\n### ‚ùï Writing a function\n\nTo count unique values for all categorical variables separately, I'll write a function, `count_unique`, to avoid copying and pasting a block of code several times.\n\nHere we have a special case where we have to pass a dataframe column name (variable) to a function argument. The solution is to embrace the argument by surrounding it in doubled braces, like `group_by({{ var }})`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncount_unique <- function(data, var) {\n  \n  data %>%\n    group_by({{ var }}) %>%    \n    summarise(count = n(), .groups = \"drop\") %>% \n    mutate(percent = scales::percent(count/sum(count), accuracy = 0.1)) %>% \n    arrange(desc(count))\n\n}\n```\n:::\n\n\n### üìÑ Breakdown by categorical variables\n\n#### Gender\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncount_unique(mass_shootings_cln, gender)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 √ó 3\n  gender               count percent\n  <chr>                <int> <chr>  \n1 Male                   145 96.0%  \n2 Female                   3 2.0%   \n3 Male & Female            2 1.3%   \n4 Female (transgender)     1 0.7%   \n```\n:::\n:::\n\n\n#### Race\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncount_unique(mass_shootings_cln, race) \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 8 √ó 3\n  race            count percent\n  <chr>           <int> <chr>  \n1 White              82 54.3%  \n2 Black              26 17.2%  \n3 Latino             12 7.9%   \n4 <NA>               12 7.9%   \n5 Asian              10 6.6%   \n6 Other               5 3.3%   \n7 Native American     3 2.0%   \n8 Unclear             1 0.7%   \n```\n:::\n:::\n\n\n#### Specific location\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncount_unique(mass_shootings_cln, location_2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 √ó 3\n  location_2 count percent\n  <chr>      <int> <chr>  \n1 Other         58 38.4%  \n2 Workplace     54 35.8%  \n3 School        24 15.9%  \n4 Religious      8 5.3%   \n5 Military       6 4.0%   \n6 Airport        1 0.7%   \n```\n:::\n:::\n\n\n#### Prior signs of mental health issues\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncount_unique(mass_shootings_cln, prior_signs_mental_health_issues)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 √ó 3\n  prior_signs_mental_health_issues count percent\n  <chr>                            <int> <chr>  \n1 Yes                                 74 49.0%  \n2 <NA>                                31 20.5%  \n3 Unclear                             24 15.9%  \n4 No                                  17 11.3%  \n5 To be determined                     4 2.6%   \n6 Unknown                              1 0.7%   \n```\n:::\n:::\n\n\n#### Weapons obtained legally\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncount_unique(mass_shootings_cln, weapons_obtained_legally)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 √ó 3\n  weapons_obtained_legally count percent\n  <chr>                    <int> <chr>  \n1 Yes                         99 65.6%  \n2 <NA>                        21 13.9%  \n3 No                          16 10.6%  \n4 To be determined             7 4.6%   \n5 Unknown                      7 4.6%   \n6 Partially                    1 0.7%   \n```\n:::\n:::\n\n\n#### Type\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncount_unique(mass_shootings_cln, type)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 √ó 3\n  type  count percent\n  <chr> <int> <chr>  \n1 Mass    129 85.4%  \n2 Spree    22 14.6%  \n```\n:::\n:::\n\n\nNote: Spree shootings have three or more victims in a short time in multiple locations.\n\n### üìä Age of shooter distribution\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Code for creating the age_group column\"}\n# create \"age group\" column\nmass_shootings_cln <-  mass_shootings_cln %>% \n  mutate(age_group = case_when(\n    age_of_shooter >= 10 & age_of_shooter <= 14 ~ \"10-14\",\n    age_of_shooter <= 19 ~ \"15-19\",\n    age_of_shooter <= 24 ~ \"20-24\",\n    age_of_shooter <= 29 ~ \"25-29\",\n    age_of_shooter <= 34 ~ \"30-34\",\n    age_of_shooter <= 39 ~ \"35-39\",\n    age_of_shooter <= 44 ~ \"40-44\",\n    age_of_shooter <= 49 ~ \"45-49\",\n    age_of_shooter <= 54 ~ \"50-54\",\n    age_of_shooter <= 59 ~ \"55-59\",\n    age_of_shooter <= 64 ~ \"60-64\",\n    age_of_shooter <= 69 ~ \"65-69\",\n    age_of_shooter <= 74 ~ \"70-74\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\np1 <- mass_shootings_cln %>% \n  filter(!is.na(age_group)) %>% \n  group_by(age_group) %>% \n  summarise(count = n(), .groups = \"drop\") %>% \n  mutate(percent = scales::percent(count/sum(count), accuracy = 0.1)) %>% \n  mutate(label_text = str_glue(\"Age group: {age_group}\n                               Count: {count}\n                               Percent: {percent}\")) %>%\n  ggplot(aes(x = age_group, y = count, text = label_text)) +\n  geom_col(width = 0.7, fill = \"indianred\") +\n  labs(title = \"Age Distribution\", x = \"age group\") \n\nggplotly(p1, tooltip = \"text\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-c6eeca1e0cd3c6e3c802\" style=\"width:100%;height:464px;\" class=\"plotly html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-c6eeca1e0cd3c6e3c802\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.70000000000000007,0.70000000000000018,0.70000000000000018,0.69999999999999973,0.69999999999999929,0.69999999999999929,0.69999999999999929,0.69999999999999929,0.69999999999999929,0.69999999999999929,0.69999999999999929,0.69999999999999929,0.69999999999999929],\"base\":[0,0,0,0,0,0,0,0,0,0,0,0,0],\"x\":[1,2,3,4,5,6,7,8,9,10,11,12,13],\"y\":[2,16,27,23,11,16,26,10,5,6,2,3,2],\"text\":[\"Age group: 10-14<br />Count: 2<br />Percent: 1.3%\",\"Age group: 15-19<br />Count: 16<br />Percent: 10.7%\",\"Age group: 20-24<br />Count: 27<br />Percent: 18.1%\",\"Age group: 25-29<br />Count: 23<br />Percent: 15.4%\",\"Age group: 30-34<br />Count: 11<br />Percent: 7.4%\",\"Age group: 35-39<br />Count: 16<br />Percent: 10.7%\",\"Age group: 40-44<br />Count: 26<br />Percent: 17.4%\",\"Age group: 45-49<br />Count: 10<br />Percent: 6.7%\",\"Age group: 50-54<br />Count: 5<br />Percent: 3.4%\",\"Age group: 55-59<br />Count: 6<br />Percent: 4.0%\",\"Age group: 60-64<br />Count: 2<br />Percent: 1.3%\",\"Age group: 65-69<br />Count: 3<br />Percent: 2.0%\",\"Age group: 70-74<br />Count: 2<br />Percent: 1.3%\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(205,92,92,1)\",\"line\":{\"width\":null,\"color\":\"transparent\"}},\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.762557077625573,\"r\":7.3059360730593621,\"b\":40.182648401826491,\"l\":37.260273972602747},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"Age Distribution\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,13.6],\"tickmode\":\"array\",\"ticktext\":[\"10-14\",\"15-19\",\"20-24\",\"25-29\",\"30-34\",\"35-39\",\"40-44\",\"45-49\",\"50-54\",\"55-59\",\"60-64\",\"65-69\",\"70-74\"],\"tickvals\":[1,2,3,4,5,6,7,8,9,10,11,12,13],\"categoryorder\":\"array\",\"categoryarray\":[\"10-14\",\"15-19\",\"20-24\",\"25-29\",\"30-34\",\"35-39\",\"40-44\",\"45-49\",\"50-54\",\"55-59\",\"60-64\",\"65-69\",\"70-74\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"age group\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-1.3500000000000001,28.350000000000001],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"10\",\"20\"],\"tickvals\":[0,10,20],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"10\",\"20\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"count\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"7ea421804fff\":{\"x\":{},\"y\":{},\"text\":{},\"type\":\"bar\"}},\"cur_data\":\"7ea421804fff\",\"visdat\":{\"7ea421804fff\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n\n\n<br/>\n\n-   The vast majority of shooters were between 15 and 50 years old.\n-   The age distribution is bimodal, with one mode around 23 years of age and a second mode around 41 years of age.\n-   Most shooters were in the 20-24 age group (18.1 %), followed by 40-44 (17.4 %) and 25-29 (15.4 %).\n\nüîé Who was the youngest shooter?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmass_shootings_cln %>% \n  slice_min(age_of_shooter, n = 1) %>% \n  select(case, date, summary, fatalities) %>% \n  knitr::kable()\n```\n\n::: {.cell-output-display}\n|case                            |date       |summary                                                                                                                                                                         | fatalities|\n|:-------------------------------|:----------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------:|\n|Westside Middle School killings |1998-03-24 |Mitchell Scott Johnson, 13, and Andrew Douglas Golden, 11, two juveniles, ambushed students and teachers as they left the school; they were apprehended by police at the scene. |          5|\n:::\n:::\n\n\n### üìä Number of cases per year\n\n\n::: {.cell}\n\n```{.r .cell-code}\np2 <- mass_shootings_cln %>%\n  group_by(year) %>%\n  summarise(count = n()) %>% \n  ggplot(aes(year, count)) +\n  geom_col(fill = \"steelblue\") + \n  geom_smooth(method = \"loess\", se = FALSE, color = \"indianred\", size = 0.7) +\n  labs(title = \"Number of Cases per Year\") \n\nggplotly(p2)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-fa02f5ccdb9a6deb752e\" style=\"width:100%;height:464px;\" class=\"plotly html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-fa02f5ccdb9a6deb752e\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095],\"base\":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\"x\":[1982,1984,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024],\"y\":[1,2,1,1,1,2,1,3,2,4,1,1,1,2,3,5,1,1,1,1,2,3,4,3,4,1,3,7,5,4,7,6,11,12,10,2,6,12,12,2],\"text\":[\"year: 1982<br />count:  1\",\"year: 1984<br />count:  2\",\"year: 1986<br />count:  1\",\"year: 1987<br />count:  1\",\"year: 1988<br />count:  1\",\"year: 1989<br />count:  2\",\"year: 1990<br />count:  1\",\"year: 1991<br />count:  3\",\"year: 1992<br />count:  2\",\"year: 1993<br />count:  4\",\"year: 1994<br />count:  1\",\"year: 1995<br />count:  1\",\"year: 1996<br />count:  1\",\"year: 1997<br />count:  2\",\"year: 1998<br />count:  3\",\"year: 1999<br />count:  5\",\"year: 2000<br />count:  1\",\"year: 2001<br />count:  1\",\"year: 2003<br />count:  1\",\"year: 2004<br />count:  1\",\"year: 2005<br />count:  2\",\"year: 2006<br />count:  3\",\"year: 2007<br />count:  4\",\"year: 2008<br />count:  3\",\"year: 2009<br />count:  4\",\"year: 2010<br />count:  1\",\"year: 2011<br />count:  3\",\"year: 2012<br />count:  7\",\"year: 2013<br />count:  5\",\"year: 2014<br />count:  4\",\"year: 2015<br />count:  7\",\"year: 2016<br />count:  6\",\"year: 2017<br />count: 11\",\"year: 2018<br />count: 12\",\"year: 2019<br />count: 10\",\"year: 2020<br />count:  2\",\"year: 2021<br />count:  6\",\"year: 2022<br />count: 12\",\"year: 2023<br />count: 12\",\"year: 2024<br />count:  2\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(70,130,180,1)\",\"line\":{\"width\":null,\"color\":\"transparent\"}},\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1982,1982.5316455696202,1983.0632911392406,1983.5949367088608,1984.126582278481,1984.6582278481012,1985.1898734177216,1985.7215189873418,1986.253164556962,1986.7848101265822,1987.3164556962026,1987.8481012658228,1988.379746835443,1988.9113924050632,1989.4430379746836,1989.9746835443038,1990.506329113924,1991.0379746835442,1991.5696202531647,1992.1012658227849,1992.632911392405,1993.1645569620252,1993.6962025316457,1994.2278481012659,1994.7594936708861,1995.2911392405063,1995.8227848101267,1996.3544303797469,1996.8860759493671,1997.4177215189873,1997.9493670886077,1998.4810126582279,1999.0126582278481,1999.5443037974683,2000.0759493670887,2000.6075949367089,2001.1392405063291,2001.6708860759493,2002.2025316455697,2002.7341772151899,2003.2658227848101,2003.7974683544303,2004.3291139240507,2004.8607594936709,2005.3924050632911,2005.9240506329113,2006.4556962025317,2006.9873417721519,2007.5189873417721,2008.0506329113923,2008.5822784810127,2009.1139240506329,2009.6455696202531,2010.1772151898733,2010.7088607594937,2011.2405063291139,2011.7721518987341,2012.3037974683543,2012.8354430379748,2013.367088607595,2013.8987341772151,2014.4303797468353,2014.9620253164558,2015.493670886076,2016.0253164556962,2016.5569620253164,2017.0886075949368,2017.620253164557,2018.1518987341772,2018.6835443037974,2019.2151898734178,2019.746835443038,2020.2784810126582,2020.8101265822784,2021.3417721518988,2021.873417721519,2022.4050632911392,2022.9367088607594,2023.4683544303798,2024],\"y\":[1.1176209624279145,1.1658796049948308,1.2132861163675976,1.2597526716251102,1.3051914458463245,1.3495146141101759,1.3926343514956181,1.4344628330815492,1.4749122339469238,1.5138947291706772,1.5513224938317607,1.5871077030090772,1.6209965935494128,1.6526571382384612,1.682405505760147,1.7105903534496012,1.7375603386419947,1.7636641186724829,1.7892503508762336,1.8146676925883831,1.8402648011440976,1.866048300914406,1.8875309725094676,1.9041975017642037,1.9173069871315154,1.9281185270642958,1.9378912200154406,1.9478841644378349,1.9593564587843746,1.9735672015079524,1.9917754910614691,2.0055112225760157,2.0039804033197046,1.9914393751149286,1.9722569836449737,1.9508020745931529,1.931443493642756,1.9185500864770757,1.9164906987794121,1.9296341762330615,1.9623493645213177,2.0190051093274755,2.0996739077969484,2.1906835982898336,2.2913318243003689,2.4024578779780601,2.5249010514724648,2.6595006369329859,2.8070959265091777,2.968526212350544,3.1446307866066698,3.3369467388262746,3.5638765814038869,3.8256005808549149,4.1117659381176894,4.4120198541301621,4.7160095298306564,5.013382166157375,5.2937849640486343,5.5468651244423945,5.7622698482769836,5.9480634519133764,6.1351910957253502,6.3225656024762431,6.5081303279552465,6.689828627951476,6.8656038582541177,7.0333993746521344,7.1911585329347174,7.3368246888909781,7.4687100130979678,7.5889438766841977,7.6986993239497412,7.7985044200623266,7.8888872301897246,7.9703758194995853,8.0434982531596795,8.1087825963377416,8.1667569142015228,8.2179492719187017],\"text\":[\"year: 1982.000<br />count: 1.117621\",\"year: 1982.532<br />count: 1.165880\",\"year: 1983.063<br />count: 1.213286\",\"year: 1983.595<br />count: 1.259753\",\"year: 1984.127<br />count: 1.305191\",\"year: 1984.658<br />count: 1.349515\",\"year: 1985.190<br />count: 1.392634\",\"year: 1985.722<br />count: 1.434463\",\"year: 1986.253<br />count: 1.474912\",\"year: 1986.785<br />count: 1.513895\",\"year: 1987.316<br />count: 1.551322\",\"year: 1987.848<br />count: 1.587108\",\"year: 1988.380<br />count: 1.620997\",\"year: 1988.911<br />count: 1.652657\",\"year: 1989.443<br />count: 1.682406\",\"year: 1989.975<br />count: 1.710590\",\"year: 1990.506<br />count: 1.737560\",\"year: 1991.038<br />count: 1.763664\",\"year: 1991.570<br />count: 1.789250\",\"year: 1992.101<br />count: 1.814668\",\"year: 1992.633<br />count: 1.840265\",\"year: 1993.165<br />count: 1.866048\",\"year: 1993.696<br />count: 1.887531\",\"year: 1994.228<br />count: 1.904198\",\"year: 1994.759<br />count: 1.917307\",\"year: 1995.291<br />count: 1.928119\",\"year: 1995.823<br />count: 1.937891\",\"year: 1996.354<br />count: 1.947884\",\"year: 1996.886<br />count: 1.959356\",\"year: 1997.418<br />count: 1.973567\",\"year: 1997.949<br />count: 1.991775\",\"year: 1998.481<br />count: 2.005511\",\"year: 1999.013<br />count: 2.003980\",\"year: 1999.544<br />count: 1.991439\",\"year: 2000.076<br />count: 1.972257\",\"year: 2000.608<br />count: 1.950802\",\"year: 2001.139<br />count: 1.931443\",\"year: 2001.671<br />count: 1.918550\",\"year: 2002.203<br />count: 1.916491\",\"year: 2002.734<br />count: 1.929634\",\"year: 2003.266<br />count: 1.962349\",\"year: 2003.797<br />count: 2.019005\",\"year: 2004.329<br />count: 2.099674\",\"year: 2004.861<br />count: 2.190684\",\"year: 2005.392<br />count: 2.291332\",\"year: 2005.924<br />count: 2.402458\",\"year: 2006.456<br />count: 2.524901\",\"year: 2006.987<br />count: 2.659501\",\"year: 2007.519<br />count: 2.807096\",\"year: 2008.051<br />count: 2.968526\",\"year: 2008.582<br />count: 3.144631\",\"year: 2009.114<br />count: 3.336947\",\"year: 2009.646<br />count: 3.563877\",\"year: 2010.177<br />count: 3.825601\",\"year: 2010.709<br />count: 4.111766\",\"year: 2011.241<br />count: 4.412020\",\"year: 2011.772<br />count: 4.716010\",\"year: 2012.304<br />count: 5.013382\",\"year: 2012.835<br />count: 5.293785\",\"year: 2013.367<br />count: 5.546865\",\"year: 2013.899<br />count: 5.762270\",\"year: 2014.430<br />count: 5.948063\",\"year: 2014.962<br />count: 6.135191\",\"year: 2015.494<br />count: 6.322566\",\"year: 2016.025<br />count: 6.508130\",\"year: 2016.557<br />count: 6.689829\",\"year: 2017.089<br />count: 6.865604\",\"year: 2017.620<br />count: 7.033399\",\"year: 2018.152<br />count: 7.191159\",\"year: 2018.684<br />count: 7.336825\",\"year: 2019.215<br />count: 7.468710\",\"year: 2019.747<br />count: 7.588944\",\"year: 2020.278<br />count: 7.698699\",\"year: 2020.810<br />count: 7.798504\",\"year: 2021.342<br />count: 7.888887\",\"year: 2021.873<br />count: 7.970376\",\"year: 2022.405<br />count: 8.043498\",\"year: 2022.937<br />count: 8.108783\",\"year: 2023.468<br />count: 8.166757\",\"year: 2024.000<br />count: 8.217949\"],\"type\":\"scatter\",\"mode\":\"lines\",\"name\":\"fitted values\",\"line\":{\"width\":2.6456692913385824,\"color\":\"rgba(205,92,92,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.762557077625573,\"r\":7.3059360730593621,\"b\":40.182648401826491,\"l\":48.949771689497723},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"Number of Cases per Year\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[1979.405,2026.595],\"tickmode\":\"array\",\"ticktext\":[\"1980\",\"1990\",\"2000\",\"2010\",\"2020\"],\"tickvals\":[1980,1990,2000,2010,2020],\"categoryorder\":\"array\",\"categoryarray\":[\"1980\",\"1990\",\"2000\",\"2010\",\"2020\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"year\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-0.60000000000000009,12.6],\"tickmode\":\"array\",\"ticktext\":[\"0.0\",\"2.5\",\"5.0\",\"7.5\",\"10.0\",\"12.5\"],\"tickvals\":[0,2.5,5,7.5,10,12.5],\"categoryorder\":\"array\",\"categoryarray\":[\"0.0\",\"2.5\",\"5.0\",\"7.5\",\"10.0\",\"12.5\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"count\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"7ea423585509\":{\"x\":{},\"y\":{},\"type\":\"bar\"},\"7ea435e846e9\":{\"x\":{},\"y\":{}}},\"cur_data\":\"7ea423585509\",\"visdat\":{\"7ea423585509\":[\"function (y) \",\"x\"],\"7ea435e846e9\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n<br>\n\n-   We can see an increase in mass shootings in the last 12 years.\n-   2020 has a smaller number of cases probably due to Covid restrictions.\n-   There were only 2 cases of mass shootings in 2024, which is very encouraging!\n\n### üìä Fatalities-Injured relationship\n\n\n::: {.cell}\n\n```{.r .cell-code}\np3 <- mass_shootings_cln %>%\n  ggplot(aes(x = fatalities, y = injured)) +\n  geom_jitter() +\n  scale_y_sqrt() +\n  labs(title = \"Fatalities-Injured Relationship\")\n  \nggplotly(p3)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-b4ae460b2946853b9e0b\" style=\"width:100%;height:464px;\" class=\"plotly html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-b4ae460b2946853b9e0b\">{\"x\":{\"data\":[{\"x\":[3.6288637375459074,4.0216240771114826,2.6903205066919327,17.683138339407741,3.2552206512540578,3.1158356368541718,4.8824127316474915,2.9618521753698586,8.2658180454745889,5.1989392681047324,6.2971592364832762,3.0951439714059235,6.9160766791552302,10.633611821942031,5.7605116497725248,5.304534861817956,3.3652648067101838,5.1042777903378012,3.2513919780030847,7.3246570324525235,2.9030210558325051,2.951876227930188,3.8729078259319065,20.693315848149361,10.229612253606319,3.9371380908414721,3.6291749849915504,9.2994843540713195,8.0063902312889699,4.1267149157822134,9.7208111796528094,7.7704299688339233,3.9827998206019402,5.2090453242883088,3.8270232506096362,3.2346876174211503,7.2619519321247932,9.2659708974882964,22.328147313930096,3.2214721262454988,12.262865379638971,4.6454956363886595,2.8219409953802823,4.730169536732137,2.7532184861600397,11.909804200939835,11.046400473080576,3.1180982831865549,4.8523143775761124,3.0849673179909587,5.1957832736894485,10.0323181187734,4.0347123285755515,2.8239213017746807,17.257660519517959,4.0232179153710605,4.8022494383156298,25.715873654000461,2.8913623159751296,2.7153606245294215,59.900706749036907,2.8540094099938869,2.8021609356626866,5.0448400160297755,2.984657070413232,2.7353863349184393,5.0660289555788038,5.3018400609493259,3.368140734732151,4.9220032669603828,49.038284768164161,2.6711258264258504,6.0960199860855937,14.190029761940242,2.9024266596883534,2.8693687485530974,9.0172200316563256,5.3638093026354907,9.1085042010992758,3.0350720314309001,4.8759482042863969,5.9483201485127211,3.092967288941145,3.6635755022987722,12.373526147566736,7.2577439321205022,6.2138495260849593,4.7204226488247514,4.8159777957946064,26.671591142565013,6.7014219002798203,6.804285108856857,12.244258092343808,6.1532594822347164,7.2836832053959366,5.2196348126977679,7.7748542658984663,5.0544738972559573,6.1487297924235467,8.6715284941717989,3.8272291220724584,13.008616682142019,14.072052100487053,8.3150511415675279,6.0230115022510287,5.2329533664509658,5.8729649791494012,8.813939190283417,6.3346596835181117,32.242203145101669,6.0292212104424836,6.0135801156982778,6.7448830952867862,8.3661399729549881,9.7748357538133863,6.9760906307026742,5.132831068336964,6.6514494789764287,4.8741641005501153,6.8600907342508437,5.0625855958089234,7.1469424266368149,7.6581174168735746,8.9307005500420935,12.70147939324379,4.2070914711803198,4.8090406347066166,4.7814066179096697,5.3937644734978676,3.6201053895056248,6.0438887296244506,5.9615253187716011,4.7217997098341584,3.7900813123211265,6.1159922642633315,3.6599881643429399,9.2811480464413769,4.6317515684291717,4.3889517758041618,5.031674349121749,6.2382608996704221,23.767209512740372,9.6193174034357067,8.93718306068331,6.112643199786544,7.058163651265204,5.6258372277021405,14.649390610866249,21.965989675745369,5.7395150860771533,7.8446854248642923],\"y\":[3.0326233647607346,3.1567990553177836,0.99048414255856354,3.6414323603254242,0.016542099325529649,2.4614631865278067,1.407070618465013,2.4735747351882047,2.6255941563080825,2.8126617968455618,2.4328765543457438,2.22684979977788,0.96617264644378031,3.1832592402671187,2.4586863237349976,5.0330429469696947,1.3886695028285208,1.4028029620731493,1.4489646951489787,6.779234630048701,-0.016878353754723262,1.0092401293927971,0.025347991798604412,4.1336306444702524,1.7289463954034117,0.00077772920112390703,2.6094935960730155,-0.035324491513606823,2.6736255627781649,1.0195926359723626,-0.027191554799642421,0.96125490478694853,0.0013375251957442186,0.0076418738732563496,1.7361243356492033,2.8411032320483218,5.0123321546954358,5.2231752076491249,5.0616530173722252,3.4583184112323759,1.9775951165615402,2.4854107006297386,1.0113139599227949,0.035989591890227775,-0.0015154701322592987,4.6613425250149767,2.451006454398807,1.7326227841366177,-0.0368353838308558,1.4224548525293479,1.426597243305272,3.6269967729974826,1.9934705923462823,-0.017727899726558295,4.1219090457743448,1.0325188617641283,3.1249751528184193,4.4511148511354941,0.029726007665365713,1.7689716968910272,23.386535089267248,1.3925291411036229,0.024256426225427279,-0.01184928104225895,-0.010485301227027205,-0.024943051219590621,2.4107739912405903,0.00070058602367254613,1.6941489944624788,3.348692387379443,7.2917240064980398,3.7546082504173306,1.4130762128059648,4.5888942401718165,3.0062979018256528,-0.022082519532637269,3.0144259400003803,1.4352627628337191,0.97389672575198094,0.98584079503285693,0.97128770892718974,3.5933658846232959,3.4472876214737846,1.3992846388564162,2.8348461470166733,-0.028449039100692318,1.7071755651255727,0.016700905274053802,1.4075595920480066,1.4324029880790985,0.97710681520219622,1.6959486730283153,8.3838791894337508,0.9996881594564343,1.7016915871717151,0.02232139490759294,1.0249286822604184,2.6821762684974311,3.637960787255655,1.4311852400207075,1.0023062644084488,5.5770502132913551,2.0188736844294985,1.73958892016214,1.0057574487024392,4.582499701587496,1.3930931226878061,2.0117924965709943,1.0360356491520049,4.7789137672289339,2.0135647760933222,2.2690957468698598,1.4509951823155141,0.0096389367700442652,2.2498224592139984,2.0020454958372889,2.6542505822394706,2.8223102307218522,1.9857779955032904,-0.02351840761191875,1.7548669191525954,0.0063568063479211914,2.6814407347684583,3.6307899781168276,4.9302607266909835,5.0155255063105031,3.1545692918603589,1.0362408917421395,1.387146455647472,1.7478919738944148,1.0321528508317634,0.026181394379652299,4.7918073605835518,1.0315710227454749,4.3768706822055616,2.8198059350881821,2.4177234353133268,0.023438022038641516,3.1717326004512074,2.2301342560884025,1.0342365375300597,4.4535579076922289,1.9625652754219771,3.4885557251054955,5.3949881881066464,2.0016965125805473,3.7118586515295489,2.4769844744291074,4.3595961952228715,0.97427386417040529,1.7436950892735104],\"text\":[\"fatalities:  4<br />injured:   9\",\"fatalities:  4<br />injured:  10\",\"fatalities:  3<br />injured:   1\",\"fatalities: 18<br />injured:  13\",\"fatalities:  3<br />injured:   0\",\"fatalities:  3<br />injured:   6\",\"fatalities:  5<br />injured:   2\",\"fatalities:  3<br />injured:   6\",\"fatalities:  8<br />injured:   7\",\"fatalities:  5<br />injured:   8\",\"fatalities:  6<br />injured:   6\",\"fatalities:  3<br />injured:   5\",\"fatalities:  7<br />injured:   1\",\"fatalities: 11<br />injured:  10\",\"fatalities:  6<br />injured:   6\",\"fatalities:  5<br />injured:  25\",\"fatalities:  3<br />injured:   2\",\"fatalities:  5<br />injured:   2\",\"fatalities:  3<br />injured:   2\",\"fatalities:  7<br />injured:  46\",\"fatalities:  3<br />injured:   0\",\"fatalities:  3<br />injured:   1\",\"fatalities:  4<br />injured:   0\",\"fatalities: 21<br />injured:  17\",\"fatalities: 10<br />injured:   3\",\"fatalities:  4<br />injured:   0\",\"fatalities:  4<br />injured:   7\",\"fatalities:  9<br />injured:   0\",\"fatalities:  8<br />injured:   7\",\"fatalities:  4<br />injured:   1\",\"fatalities: 10<br />injured:   0\",\"fatalities:  8<br />injured:   1\",\"fatalities:  4<br />injured:   0\",\"fatalities:  5<br />injured:   0\",\"fatalities:  4<br />injured:   3\",\"fatalities:  3<br />injured:   8\",\"fatalities:  7<br />injured:  25\",\"fatalities:  9<br />injured:  27\",\"fatalities: 22<br />injured:  26\",\"fatalities:  3<br />injured:  12\",\"fatalities: 12<br />injured:   4\",\"fatalities:  5<br />injured:   6\",\"fatalities:  3<br />injured:   1\",\"fatalities:  5<br />injured:   0\",\"fatalities:  3<br />injured:   0\",\"fatalities: 12<br />injured:  22\",\"fatalities: 11<br />injured:   6\",\"fatalities:  3<br />injured:   3\",\"fatalities:  5<br />injured:   0\",\"fatalities:  3<br />injured:   2\",\"fatalities:  5<br />injured:   2\",\"fatalities: 10<br />injured:  13\",\"fatalities:  4<br />injured:   4\",\"fatalities:  3<br />injured:   0\",\"fatalities: 17<br />injured:  17\",\"fatalities:  4<br />injured:   1\",\"fatalities:  5<br />injured:  10\",\"fatalities: 26<br />injured:  20\",\"fatalities:  3<br />injured:   0\",\"fatalities:  3<br />injured:   3\",\"fatalities: 60<br />injured: 546\",\"fatalities:  3<br />injured:   2\",\"fatalities:  3<br />injured:   0\",\"fatalities:  5<br />injured:   0\",\"fatalities:  3<br />injured:   0\",\"fatalities:  3<br />injured:   0\",\"fatalities:  5<br />injured:   6\",\"fatalities:  5<br />injured:   0\",\"fatalities:  3<br />injured:   3\",\"fatalities:  5<br />injured:  11\",\"fatalities: 49<br />injured:  53\",\"fatalities:  3<br />injured:  14\",\"fatalities:  6<br />injured:   2\",\"fatalities: 14<br />injured:  21\",\"fatalities:  3<br />injured:   9\",\"fatalities:  3<br />injured:   0\",\"fatalities:  9<br />injured:   9\",\"fatalities:  5<br />injured:   2\",\"fatalities:  9<br />injured:   1\",\"fatalities:  3<br />injured:   1\",\"fatalities:  5<br />injured:   1\",\"fatalities:  6<br />injured:  13\",\"fatalities:  3<br />injured:  12\",\"fatalities:  4<br />injured:   2\",\"fatalities: 12<br />injured:   8\",\"fatalities:  7<br />injured:   0\",\"fatalities:  6<br />injured:   3\",\"fatalities:  5<br />injured:   0\",\"fatalities:  5<br />injured:   2\",\"fatalities: 27<br />injured:   2\",\"fatalities:  7<br />injured:   1\",\"fatalities:  7<br />injured:   3\",\"fatalities: 12<br />injured:  70\",\"fatalities:  6<br />injured:   1\",\"fatalities:  7<br />injured:   3\",\"fatalities:  5<br />injured:   0\",\"fatalities:  8<br />injured:   1\",\"fatalities:  5<br />injured:   7\",\"fatalities:  6<br />injured:  13\",\"fatalities:  9<br />injured:   2\",\"fatalities:  4<br />injured:   1\",\"fatalities: 13<br />injured:  31\",\"fatalities: 14<br />injured:   4\",\"fatalities:  8<br />injured:   3\",\"fatalities:  6<br />injured:   1\",\"fatalities:  5<br />injured:  21\",\"fatalities:  6<br />injured:   2\",\"fatalities:  9<br />injured:   4\",\"fatalities:  6<br />injured:   1\",\"fatalities: 32<br />injured:  23\",\"fatalities:  6<br />injured:   4\",\"fatalities:  6<br />injured:   5\",\"fatalities:  7<br />injured:   2\",\"fatalities:  8<br />injured:   0\",\"fatalities: 10<br />injured:   5\",\"fatalities:  7<br />injured:   4\",\"fatalities:  5<br />injured:   7\",\"fatalities:  7<br />injured:   8\",\"fatalities:  5<br />injured:   4\",\"fatalities:  7<br />injured:   0\",\"fatalities:  5<br />injured:   3\",\"fatalities:  7<br />injured:   0\",\"fatalities:  8<br />injured:   7\",\"fatalities:  9<br />injured:  13\",\"fatalities: 13<br />injured:  24\",\"fatalities:  4<br />injured:  25\",\"fatalities:  5<br />injured:  10\",\"fatalities:  5<br />injured:   1\",\"fatalities:  5<br />injured:   2\",\"fatalities:  4<br />injured:   3\",\"fatalities:  6<br />injured:   1\",\"fatalities:  6<br />injured:   0\",\"fatalities:  5<br />injured:  23\",\"fatalities:  4<br />injured:   1\",\"fatalities:  6<br />injured:  19\",\"fatalities:  4<br />injured:   8\",\"fatalities:  9<br />injured:   6\",\"fatalities:  5<br />injured:   0\",\"fatalities:  4<br />injured:  10\",\"fatalities:  5<br />injured:   5\",\"fatalities:  6<br />injured:   1\",\"fatalities: 24<br />injured:  20\",\"fatalities: 10<br />injured:   4\",\"fatalities:  9<br />injured:  12\",\"fatalities:  6<br />injured:  29\",\"fatalities:  7<br />injured:   4\",\"fatalities:  6<br />injured:  14\",\"fatalities: 15<br />injured:   6\",\"fatalities: 22<br />injured:  19\",\"fatalities:  6<br />injured:   1\",\"fatalities:  8<br />injured:   3\"],\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,0,0,1)\",\"opacity\":1,\"size\":5.6692913385826778,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,0,0,1)\"}},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.762557077625573,\"r\":7.3059360730593621,\"b\":40.182648401826491,\"l\":43.105022831050235},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"Fatalities-Injured Relationship\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-0.19035321970470243,62.762185795167461],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"20\",\"40\",\"60\"],\"tickvals\":[0,20,40,60],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"20\",\"40\",\"60\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"fatalities\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-1.2080039074857609,24.557703612922154],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"100\",\"200\",\"300\",\"400\",\"500\",\"600\"],\"tickvals\":[0,10,14.142135623730953,17.320508075688775,20,22.360679774997898,24.494897427831781],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"100\",\"200\",\"300\",\"400\",\"500\",\"600\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"injured\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"7ea412444aea\":{\"x\":{},\"y\":{},\"type\":\"scatter\"}},\"cur_data\":\"7ea412444aea\",\"visdat\":{\"7ea412444aea\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n<br>\n\nPlease note that the `Injured` values are square root scaled for better visibility, but you can see the actual values by hovering over the points.\n\n**Summary of fatalities**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(mass_shootings_cln$fatalities)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  3.000   4.000   6.000   7.676   8.000  60.000 \n```\n:::\n:::\n\n\n**Summary of injured people**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(mass_shootings_cln$injured)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n   0.00    1.00    3.00   10.91   10.00  546.00 \n```\n:::\n:::\n\n\n### üìä Total fatalities by state\n\n#### üõ†Ô∏è Data manipulation\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# create us states with abbreviations tibble\nstates_with_abbr <- \n  tibble(state = state.name, abbr = state.abb) %>% \n  bind_rows(tibble(state = \"District of Columbia\", abbr = \"DC\"))\n\n# data manipulation\nby_state <- mass_shootings_cln %>% \n  # recode D.d. to District of Columbia\n  mutate(location = ifelse(location == \"Washington, D.C.\", \n                           \"Washington, District of Columbia\", \n                           location)) %>% \n  # separate location into city and state\n  separate(location, c(\"city\", \"state\"), sep = \", \") %>% \n  # group and summarize\n  group_by(state) %>% \n  summarise(total_cases = n(),\n            total_fatalities = sum(fatalities), .groups = \"drop\") %>% \n  # add us states abbreviations\n  left_join(states_with_abbr, by = \"state\") %>% \n  # rearrange columns\n  select(state, abbr, everything())\n```\n:::\n\n\n#### üìà Top ten states regarding number of cases and fatalities\n\n\n::: {.cell}\n\n```{.r .cell-code}\nby_state %>% \n  arrange(-total_cases, -total_fatalities) %>% \n  head(10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 10 √ó 4\n   state        abbr  total_cases total_fatalities\n   <chr>        <chr>       <int>            <dbl>\n 1 California   CA             26              178\n 2 Texas        TX             13              159\n 3 Florida      FL             13              129\n 4 Colorado     CO              8               53\n 5 Washington   WA              7               37\n 6 Pennsylvania PA              6               32\n 7 New York     NY              5               40\n 8 Wisconsin    WI              5               28\n 9 Illinois     IL              5               25\n10 Virginia     VA              4               53\n```\n:::\n:::\n\n\n#### üìä Total fatalities by state visualization\n\n\n::: {.cell}\n\n```{.r .cell-code}\nby_state %>% \n  plot_geo(locationmode = 'USA-states') %>% \n  add_trace(z = ~total_fatalities,\n            locations = ~abbr,\n            color = ~total_fatalities,\n            colors = ~\"Reds\") %>% \n  layout(\n    geo = list(\n      scope = \"usa\",\n      projection = list(type = \"albers usa\"),\n      lakecolor = toRGB(\"white\")\n    )\n  )\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-21e55911dc5b1b9d0999\" style=\"width:100%;height:464px;\" class=\"plotly html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-21e55911dc5b1b9d0999\">{\"x\":{\"visdat\":{\"7ea455b36db8\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"7ea455b36db8\",\"attrs\":{\"7ea455b36db8\":{\"locationmode\":\"USA-states\",\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"z\":{},\"locations\":{},\"color\":{},\"colors\":{},\"inherit\":true}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":10},\"mapType\":\"geo\",\"geo\":{\"domain\":{\"x\":[0,1],\"y\":[0,1]},\"scope\":\"usa\",\"projection\":{\"type\":\"albers usa\"},\"lakecolor\":\"rgba(255,255,255,1)\"},\"scene\":{\"zaxis\":{\"title\":\"total_fatalities\"}},\"hovermode\":\"closest\",\"showlegend\":false,\"legend\":{\"yanchor\":\"top\",\"y\":0.5}},\"source\":\"A\",\"config\":{\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"data\":[{\"colorbar\":{\"title\":\"total_fatalities\",\"ticklen\":2,\"len\":0.5,\"lenmode\":\"fraction\",\"y\":1,\"yanchor\":\"top\"},\"colorscale\":[[\"0\",\"rgba(255,245,240,1)\"],[\"0.0416666666666667\",\"rgba(255,238,230,1)\"],[\"0.0833333333333333\",\"rgba(255,231,220,1)\"],[\"0.125\",\"rgba(254,224,210,1)\"],[\"0.166666666666667\",\"rgba(254,212,193,1)\"],[\"0.208333333333333\",\"rgba(253,199,177,1)\"],[\"0.25\",\"rgba(252,187,161,1)\"],[\"0.291666666666667\",\"rgba(253,174,145,1)\"],[\"0.333333333333333\",\"rgba(253,160,129,1)\"],[\"0.375\",\"rgba(252,146,114,1)\"],[\"0.416666666666667\",\"rgba(252,133,101,1)\"],[\"0.458333333333333\",\"rgba(252,120,87,1)\"],[\"0.5\",\"rgba(251,106,74,1)\"],[\"0.541666666666667\",\"rgba(247,92,64,1)\"],[\"0.583333333333333\",\"rgba(243,77,54,1)\"],[\"0.625\",\"rgba(239,59,44,1)\"],[\"0.666666666666667\",\"rgba(227,49,39,1)\"],[\"0.708333333333333\",\"rgba(215,37,34,1)\"],[\"0.75\",\"rgba(203,24,29,1)\"],[\"0.791666666666667\",\"rgba(190,21,26,1)\"],[\"0.833333333333333\",\"rgba(178,18,24,1)\"],[\"0.875\",\"rgba(165,15,21,1)\"],[\"0.916666666666667\",\"rgba(144,9,19,1)\"],[\"0.958333333333333\",\"rgba(123,3,16,1)\"],[\"1\",\"rgba(103,0,13,1)\"]],\"showscale\":true,\"locationmode\":\"USA-states\",\"z\":[3,6,9,178,53,41,12,129,26,7,25,11,6,3,20,3,18,14,7,18,17,7,10,9,68,4,3,40,17,20,19,13,32,13,15,159,6,53,37,28],\"locations\":[\"AL\",\"AZ\",\"AR\",\"CA\",\"CO\",\"CT\",\"DC\",\"FL\",\"GA\",\"HI\",\"IL\",\"IN\",\"IA\",\"KS\",\"KY\",null,\"ME\",\"MD\",\"MA\",\"MI\",\"MN\",\"MS\",\"MO\",\"NE\",\"NV\",\"NJ\",\"NM\",\"NY\",\"NC\",\"OH\",\"OK\",\"OR\",\"PA\",\"SC\",\"TN\",\"TX\",\"UT\",\"VA\",\"WA\",\"WI\"],\"type\":\"choropleth\",\"marker\":{\"line\":{\"colorbar\":{\"title\":\"\",\"ticklen\":2},\"cmin\":3,\"cmax\":178,\"colorscale\":[[\"0\",\"rgba(255,245,240,1)\"],[\"0.0416666666666667\",\"rgba(255,238,230,1)\"],[\"0.0833333333333333\",\"rgba(255,231,220,1)\"],[\"0.125\",\"rgba(254,224,210,1)\"],[\"0.166666666666667\",\"rgba(254,212,193,1)\"],[\"0.208333333333333\",\"rgba(253,199,177,1)\"],[\"0.25\",\"rgba(252,187,161,1)\"],[\"0.291666666666667\",\"rgba(253,174,145,1)\"],[\"0.333333333333333\",\"rgba(253,160,129,1)\"],[\"0.375\",\"rgba(252,146,114,1)\"],[\"0.416666666666667\",\"rgba(252,133,101,1)\"],[\"0.458333333333333\",\"rgba(252,120,87,1)\"],[\"0.5\",\"rgba(251,106,74,1)\"],[\"0.541666666666667\",\"rgba(247,92,64,1)\"],[\"0.583333333333333\",\"rgba(243,77,54,1)\"],[\"0.625\",\"rgba(239,59,44,1)\"],[\"0.666666666666667\",\"rgba(227,49,39,1)\"],[\"0.708333333333333\",\"rgba(215,37,34,1)\"],[\"0.75\",\"rgba(203,24,29,1)\"],[\"0.791666666666667\",\"rgba(190,21,26,1)\"],[\"0.833333333333333\",\"rgba(178,18,24,1)\"],[\"0.875\",\"rgba(165,15,21,1)\"],[\"0.916666666666667\",\"rgba(144,9,19,1)\"],[\"0.958333333333333\",\"rgba(123,3,16,1)\"],[\"1\",\"rgba(103,0,13,1)\"]],\"showscale\":false,\"color\":[3,6,9,178,53,41,12,129,26,7,25,11,6,3,20,3,18,14,7,18,17,7,10,9,68,4,3,40,17,20,19,13,32,13,15,159,6,53,37,28]}},\"geo\":\"geo\",\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n\n\n## Shiny app\n\nThe app you can see below is embedded in this `quarto` document since my website is static. It was originally published on [shinyapps.io](https://sandra-jurela.shinyapps.io/shiny-mass-shootings-usa/), where you can also interact with it.\n\n**Note:** If you don't see the application, I've run out of my 25 active hours (when my applications are not idle). Sorry, this is a free account, and my app will not be available again until the following month cycle. Hope you get lucky! üòä\n\nüì¢ By clicking on each circle, you can read a summary of the mass shooting case.\n\n<br>\n\n::: column-screen\n<iframe height=\"800\" width=\"100%\" frameborder=\"no\" src=\"https://sandra-jurela.shinyapps.io/shiny-mass-shootings-usa/\">\n\n</iframe>\n:::\n\nThanks for reading!\n",
    "supporting": [
      "mass-shootings_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js\"></script>\r\n<script src=\"../../site_libs/plotly-binding-4.10.0/plotly.js\"></script>\r\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\r\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\r\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\r\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/plotly-main-2.5.1/plotly-latest.min.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}