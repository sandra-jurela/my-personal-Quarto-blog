<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Sandra Jurela">
<meta name="dcterms.date" content="2023-03-01">
<meta name="description" content="EDA with Shiny app on mass shootings between August 20th, 1982 and October 25th, 2023.">

<title>Sandra Jurela - Shiny App - Mass Shootings in the USA</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../img/logo.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-JH321LBKZY"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-JH321LBKZY', { 'anonymize_ip': true});
</script>
<style>html{ scroll-behavior: smooth; }</style>
<script src="../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="../../site_libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="../../site_libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../site_libs/plotly-main-2.5.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Sandra Jurela - Shiny App - Mass Shootings in the USA">
<meta property="og:description" content="EDA with Shiny app on mass shootings between August 20th, 1982 and October 25th, 2023.">
<meta property="og:image" content="https://sandrajurela.com/posts\shiny-mass-shootings\images\preview.png">
<meta property="og:site-name" content="Sandra Jurela">
<meta property="og:image:height" content="1275">
<meta property="og:image:width" content="2080">
<meta name="twitter:title" content="Sandra Jurela - Shiny App - Mass Shootings in the USA">
<meta name="twitter:description" content="EDA with Shiny app on mass shootings between August 20th, 1982 and October 25th, 2023.">
<meta name="twitter:image" content="https://sandrajurela.com/posts\shiny-mass-shootings\images\preview.png">
<meta name="twitter:image-height" content="1275">
<meta name="twitter:image-width" content="2080">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../img/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Sandra Jurela</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/sandra-jurela"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/sandra-jurela-a95985211/"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Shiny App - Mass Shootings in the USA</h1>
                  <div>
        <div class="description">
          EDA with Shiny app on mass shootings between August 20th, 1982 and October 25th, 2023.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">r</div>
                <div class="quarto-category">shiny</div>
                <div class="quarto-category">eda</div>
                <div class="quarto-category">data cleaning</div>
                <div class="quarto-category">data wrangling</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Sandra Jurela </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 1, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#data-overview" id="toc-data-overview" class="nav-link" data-scroll-target="#data-overview">Data overview</a></li>
  <li><a href="#data-cleaning" id="toc-data-cleaning" class="nav-link" data-scroll-target="#data-cleaning">Data cleaning</a>
  <ul class="collapse">
  <li><a href="#step-1.-initial-cleaning" id="toc-step-1.-initial-cleaning" class="nav-link" data-scroll-target="#step-1.-initial-cleaning">🧹 Step 1. Initial cleaning</a></li>
  <li><a href="#step-2.-fixing-unique-values-of-categorical-variables" id="toc-step-2.-fixing-unique-values-of-categorical-variables" class="nav-link" data-scroll-target="#step-2.-fixing-unique-values-of-categorical-variables">🧹 Step 2. Fixing unique values of categorical variables</a></li>
  <li><a href="#step-3.-geocoding-locations-with-missing-coordinates" id="toc-step-3.-geocoding-locations-with-missing-coordinates" class="nav-link" data-scroll-target="#step-3.-geocoding-locations-with-missing-coordinates">🧹 Step 3. Geocoding locations with missing coordinates</a></li>
  </ul></li>
  <li><a href="#exploratory-data-analysis-eda" id="toc-exploratory-data-analysis-eda" class="nav-link" data-scroll-target="#exploratory-data-analysis-eda">Exploratory data analysis (EDA)</a>
  <ul class="collapse">
  <li><a href="#writing-a-function" id="toc-writing-a-function" class="nav-link" data-scroll-target="#writing-a-function">❕ Writing a function</a></li>
  <li><a href="#breakdown-by-categorical-variables" id="toc-breakdown-by-categorical-variables" class="nav-link" data-scroll-target="#breakdown-by-categorical-variables">📄 Breakdown by categorical variables</a></li>
  <li><a href="#age-of-shooter-distribution" id="toc-age-of-shooter-distribution" class="nav-link" data-scroll-target="#age-of-shooter-distribution">📊 Age of shooter distribution</a></li>
  <li><a href="#number-of-cases-per-year" id="toc-number-of-cases-per-year" class="nav-link" data-scroll-target="#number-of-cases-per-year">📊 Number of cases per year</a></li>
  <li><a href="#fatalities-injured-relationship" id="toc-fatalities-injured-relationship" class="nav-link" data-scroll-target="#fatalities-injured-relationship">📊 Fatalities-Injured relationship</a></li>
  <li><a href="#total-fatalities-by-state" id="toc-total-fatalities-by-state" class="nav-link" data-scroll-target="#total-fatalities-by-state">📊 Total fatalities by state</a></li>
  </ul></li>
  <li><a href="#shiny-app" id="toc-shiny-app" class="nav-link" data-scroll-target="#shiny-app">Shiny app</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">




<div class="callout-note callout callout-style-simple">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>This post will be regularly updated with each new case.</p>
<p>Last update on November 2, 2023.</p>
</div>
</div>
</div>
<p><br></p>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Mass shootings have been a topic of intense discussion in the United States. A public “database” of mass shootings since 1982 has been made available by the <a href="https://www.motherjones.com/politics/2012/12/mass-shootings-mother-jones-full-data/">Mother Jones</a>, a non-profit organization. This “database” is stored in a Google spreadsheet. You can access it <a href="https://docs.google.com/spreadsheets/d/1b9o6uDO18sLxBqPwl_Gh9bnhW-ev_dABH83M5Vb5L8o/edit#gid=0">here</a> and download as a CSV file.</p>
<p>There are many definitions of mass shooting. Here is what <a href="https://www.britannica.com/topic/mass-shooting">Britannica</a> has to say:</p>
<blockquote class="blockquote">
<p><em><strong>Mass shooting</strong>, also called <strong>active shooter incident</strong>, as defined by the U.S. <a href="https://www.britannica.com/topic/Federal-Bureau-of-Investigation">Federal Bureau of Investigation</a> (FBI), an event in which one or more individuals are “<strong>actively engaged in killing or attempting to kill people in a populated area.</strong> Implicit in this definition is the shooter’s use of a firearm.” The FBI has not set a minimum number of casualties to qualify an event as a mass shooting, but U.S. statute (the Investigative Assistance for Violent Crimes Act of 2012) defines a “mass killing” as <strong>“3 or more killings in a single incident”.</strong></em></p>
</blockquote>
</section>
<section id="data-overview" class="level2">
<h2 class="anchored" data-anchor-id="data-overview">Data overview</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidygeocoder)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_classic</span>())</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>mass_shootings <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/mass_shootings_usa_1982-2023.csv"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>mass_shootings <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 148
Columns: 24
$ case                             &lt;chr&gt; "Maine bowling alley and restaurant s…
$ location...2                     &lt;chr&gt; "Lewiston, Maine", "Jacksonville, Flo…
$ date                             &lt;chr&gt; "10/25/2023", "8/26/2023", "8/23/2023…
$ summary                          &lt;chr&gt; "Robert Card, 40, an Army reservist a…
$ fatalities                       &lt;dbl&gt; 18, 3, 3, 5, 3, 8, 5, 6, 3, 7, 11, 6,…
$ injured                          &lt;dbl&gt; 13, 0, 6, 2, 6, 7, 8, 6, 5, 1, 10, 6,…
$ total_victims                    &lt;dbl&gt; 21, 3, 9, 7, 9, 15, 13, 12, 8, 8, 21,…
$ location...8                     &lt;chr&gt; "Other", "workplace", "Other", "Other…
$ age_of_shooter                   &lt;chr&gt; "40", "21", "59", "40", "18", "33", "…
$ prior_signs_mental_health_issues &lt;chr&gt; "yes", "yes", "-", "yes", "yes", "yes…
$ mental_health_details            &lt;chr&gt; "Card reportedly spoke of \"hearing v…
$ weapons_obtained_legally         &lt;chr&gt; "-", "yes", "-", "yes", "yes", "yes",…
$ where_obtained                   &lt;chr&gt; "Yes", "local gun stores", "-", "-", …
$ weapon_type                      &lt;chr&gt; "semiautomatic rifle", "semiautomatic…
$ weapon_details                   &lt;chr&gt; "AR-15-style rifle (Rugar SFAR)", "AR…
$ race                             &lt;chr&gt; "White", "White", "White", "Black", "…
$ gender                           &lt;chr&gt; "M", "M", "M", "M", "M", "M", "M", "F…
$ sources                          &lt;chr&gt; "https://www.washingtonpost.com/natio…
$ mental_health_sources            &lt;chr&gt; "https://www.nytimes.com/article/lewi…
$ sources_additional_age           &lt;chr&gt; "-", "-", "-", "-", "-", "-", "-", "-…
$ latitude                         &lt;chr&gt; "-", "-", "-", "-", "-", "-", "-", "-…
$ longitude                        &lt;chr&gt; "-", "-", "-", "-", "-", "-", "-", "-…
$ type                             &lt;chr&gt; "Spree", "mass", "mass", "mass", "mas…
$ year                             &lt;dbl&gt; 2023, 2023, 2023, 2023, 2023, 2023, 2…</code></pre>
</div>
</div>
<p>We have 148 cases, described with 24 variables. At first glance, this dataset clearly needs extensive cleaning.</p>
</section>
<section id="data-cleaning" class="level2">
<h2 class="anchored" data-anchor-id="data-cleaning">Data cleaning</h2>
<section id="step-1.-initial-cleaning" class="level3">
<h3 class="anchored" data-anchor-id="step-1.-initial-cleaning">🧹 Step 1. Initial cleaning</h3>
<p>The first cleaning step includes:</p>
<ul>
<li>selecting columns of interest,</li>
<li>replacing the character value <code>"-"</code> with <code>NA</code> in all columns with character data type,</li>
<li>converting <code>date</code> column from character to date data type,</li>
<li>renaming location columns,</li>
<li>converting character data type to numeric for specific columns.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>mass_shootings_cln <span class="ot">&lt;-</span> mass_shootings <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">8</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">21</span><span class="sc">:</span><span class="dv">24</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), <span class="sc">~</span><span class="fu">na_if</span>(., <span class="st">"-"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> lubridate<span class="sc">::</span><span class="fu">mdy</span>(date)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">location =</span> location...<span class="dv">2</span>, <span class="at">location_2 =</span> location...<span class="dv">8</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">c</span>(<span class="st">"injured"</span>, <span class="st">"age_of_shooter"</span>, <span class="st">"latitude"</span>, <span class="st">"longitude"</span>), as.numeric)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>mass_shootings_cln <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 148
Columns: 16
$ case                             &lt;chr&gt; "Maine bowling alley and restaurant s…
$ location                         &lt;chr&gt; "Lewiston, Maine", "Jacksonville, Flo…
$ date                             &lt;date&gt; 2023-10-25, 2023-08-26, 2023-08-23, …
$ summary                          &lt;chr&gt; "Robert Card, 40, an Army reservist a…
$ fatalities                       &lt;dbl&gt; 18, 3, 3, 5, 3, 8, 5, 6, 3, 7, 11, 6,…
$ injured                          &lt;dbl&gt; 13, 0, 6, 2, 6, 7, 8, 6, 5, 1, 10, 6,…
$ location_2                       &lt;chr&gt; "Other", "workplace", "Other", "Other…
$ age_of_shooter                   &lt;dbl&gt; 40, 21, 59, 40, 18, 33, 25, 28, 43, 6…
$ prior_signs_mental_health_issues &lt;chr&gt; "yes", "yes", NA, "yes", "yes", "yes"…
$ weapons_obtained_legally         &lt;chr&gt; NA, "yes", NA, "yes", "yes", "yes", "…
$ race                             &lt;chr&gt; "White", "White", "White", "Black", "…
$ gender                           &lt;chr&gt; "M", "M", "M", "M", "M", "M", "M", "F…
$ latitude                         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ longitude                        &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ type                             &lt;chr&gt; "Spree", "mass", "mass", "mass", "mas…
$ year                             &lt;dbl&gt; 2023, 2023, 2023, 2023, 2023, 2023, 2…</code></pre>
</div>
</div>
<p>🔎 Are there any duplicates? No.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">duplicated</span>(mass_shootings))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>🔎 Number of missing values, <code>NA</code>, per column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>mass_shootings_cln <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_all</span>(<span class="sc">~</span><span class="fu">sum</span>(<span class="fu">is.na</span>(.))) <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># transposing for better visibility</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">everything</span>(), <span class="at">names_to =</span> <span class="st">"column"</span>, <span class="at">values_to =</span> <span class="st">"n_missing"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 2
   column                           n_missing
   &lt;chr&gt;                                &lt;int&gt;
 1 case                                     0
 2 location                                 0
 3 date                                     0
 4 summary                                  0
 5 fatalities                               0
 6 injured                                  0
 7 location_2                               0
 8 age_of_shooter                           2
 9 prior_signs_mental_health_issues        29
10 weapons_obtained_legally                18
11 race                                    12
12 gender                                   0
13 latitude                                22
14 longitude                               22
15 type                                     0
16 year                                     0</code></pre>
</div>
</div>
<p>22 of the most recent cases don’t have location coordinates at all. We’ll address this in the final cleanup step.</p>
</section>
<section id="step-2.-fixing-unique-values-of-categorical-variables" class="level3">
<h3 class="anchored" data-anchor-id="step-2.-fixing-unique-values-of-categorical-variables">🧹 Step 2. Fixing unique values of categorical variables</h3>
<p>🔎 Let’s take a look at the unique values of the <code>gender</code> column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>mass_shootings_cln <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(gender, <span class="at">sort =</span> <span class="cn">TRUE</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  gender                                                                       n
  &lt;chr&gt;                                                                    &lt;int&gt;
1 "M"                                                                         72
2 "Male"                                                                      70
3 "Female"                                                                     2
4 "Male &amp; Female"                                                              2
5 "F"                                                                          1
6 "F (\"identifies as transgender\" and \"Audrey Hale is a biological wom…     1</code></pre>
</div>
</div>
<p>Almost all categorical variables need unique values correction.</p>
<p>To make a long story short, I’ll correct them all in one step using <code>case_when</code> function, and we’ll look at them later during the analysis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>mass_shootings_cln <span class="ot">&lt;-</span> mass_shootings_cln <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gender =</span> <span class="fu">case_when</span>(gender <span class="sc">==</span> <span class="st">"F"</span> <span class="sc">~</span> <span class="st">"Female"</span>,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>                            gender <span class="sc">==</span> <span class="st">"M"</span> <span class="sc">~</span> <span class="st">"Male"</span>, </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>                            gender <span class="sc">==</span> <span class="st">"(see summary)"</span> <span class="sc">~</span> <span class="st">"Male"</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>                            gender <span class="sc">%&gt;%</span> <span class="fu">str_detect</span>(<span class="st">"transgender"</span>)<span class="sc">~</span><span class="st">"Female (transgender)"</span>,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>                            <span class="cn">TRUE</span> <span class="sc">~</span> gender),</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">race =</span> <span class="fu">case_when</span>(race <span class="sc">==</span> <span class="st">"white"</span> <span class="sc">~</span> <span class="st">"White"</span>,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>                          race <span class="sc">==</span> <span class="st">"black"</span> <span class="sc">~</span> <span class="st">"Black"</span>,</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>                          race <span class="sc">==</span> <span class="st">"unclear"</span> <span class="sc">~</span> <span class="st">"Unclear"</span>,</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>                          <span class="cn">TRUE</span> <span class="sc">~</span> race),</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">location_2 =</span> </span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>           <span class="fu">case_when</span>(location_2 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"workplace"</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">Workplace"</span>) <span class="sc">~</span> <span class="st">"Workplace"</span>,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>                                location_2 <span class="sc">==</span> <span class="st">"Other</span><span class="sc">\n</span><span class="st">"</span> <span class="sc">~</span> <span class="st">"Other"</span>,</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>                                location_2 <span class="sc">==</span> <span class="st">"religious"</span> <span class="sc">~</span> <span class="st">"Religious"</span>,</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>                                <span class="cn">TRUE</span> <span class="sc">~</span> location_2),</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">prior_signs_mental_health_issues =</span> </span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>           <span class="fu">case_when</span>(prior_signs_mental_health_issues <span class="sc">==</span> <span class="st">"yes"</span> <span class="sc">~</span> <span class="st">"Yes"</span>,</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>                     prior_signs_mental_health_issues <span class="sc">==</span> <span class="st">"TBD"</span> <span class="sc">~</span> <span class="st">"To be determined"</span>,</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>                     <span class="cn">TRUE</span> <span class="sc">~</span> prior_signs_mental_health_issues),</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">weapons_obtained_legally =</span> </span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>           <span class="fu">case_when</span>(weapons_obtained_legally <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"yes"</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">Yes"</span>) <span class="sc">~</span> <span class="st">"Yes"</span>,</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>                     weapons_obtained_legally <span class="sc">==</span> <span class="st">"TBD"</span> <span class="sc">~</span> <span class="st">"To be determined"</span>,</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>                     weapons_obtained_legally <span class="sc">%&gt;%</span> <span class="fu">str_detect</span>(<span class="st">"Kelley"</span>) <span class="sc">~</span> <span class="st">"Unknown"</span>,</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>                     weapons_obtained_legally <span class="sc">%&gt;%</span> <span class="fu">str_detect</span>(<span class="st">"some"</span>) <span class="sc">~</span> <span class="st">"Partially"</span>,</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>                     <span class="cn">TRUE</span> <span class="sc">~</span> weapons_obtained_legally), </span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">type =</span> <span class="fu">case_when</span>(type <span class="sc">==</span> <span class="st">"mass"</span> <span class="sc">~</span> <span class="st">"Mass"</span>,</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>                          <span class="cn">TRUE</span> <span class="sc">~</span> type))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-3.-geocoding-locations-with-missing-coordinates" class="level3">
<h3 class="anchored" data-anchor-id="step-3.-geocoding-locations-with-missing-coordinates">🧹 Step 3. Geocoding locations with missing coordinates</h3>
<p>There are 22 cases with missing location coordinates. In this step we’ll convert locations to coordinates with geocoding. and use them later to create a <code>leaflet</code> map for a <code>shiny app</code>.</p>
<p>The <code>tidygeocoder</code> package provides geocoding services. It’s designed to work easily with the <code>tidyverse.</code> It also provides access to several different geocoding services, including <a href="https://locationiq.com/">LocationIQ</a> which I’m going to use here. LocationIQ is a freemium service that provides a free tier, which doesn’t require you to give them your billing details. When you sign up to LocationIQ, they’ll take you to the Manage Your API Access Tokens page, which is where we obtain our API token. Next, you need to provide the <code>tidygeocoder</code> package with your API key.</p>
<p>You can also use the <a href="https://nominatim.org/">Nominatim (“osm”)</a> geocoding service (OpenStreetMap) which can be specified with the method argument (<code>method = "osm"</code>). I found LocationIQ to be faster.</p>
<p>The first step is to select only locations with missing coordinates and geocode them.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>geocoded_locations <span class="ot">&lt;-</span> mass_shootings_cln <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(latitude) <span class="sc">|</span> <span class="fu">is.na</span>(longitude)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(location) <span class="sc">%&gt;%</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geocode</span>(location, <span class="at">method =</span> <span class="st">"iq"</span>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>geocoded_locations <span class="sc">%&gt;%</span> </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> <span class="fu">num</span>(., <span class="at">digits =</span> <span class="dv">6</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 22 × 3
   location                         lat        long
   &lt;chr&gt;                      &lt;num:.6!&gt;   &lt;num:.6!&gt;
 1 Lewiston, Maine            44.095108  -70.215545
 2 Jacksonville, Florida      30.332184  -81.655651
 3 Trabuco Canyon, California 33.662623 -117.589380
 4 Philadelphia, Pennsylvania 39.952724  -75.163526
 5 Farmington, New Mexico     36.729115 -108.205445
 6 Allen, Texas               33.103174  -96.670550
 7 Louisville, Kentucky       38.254238  -85.759407
 8 Nashville, Tennessee       36.162277  -86.774298
 9 East Lansing, Michigan     42.732031  -84.472168
10 Half Moon Bay, California  37.463552 -122.428586
# ℹ 12 more rows</code></pre>
</div>
</div>
<p>The next step is to join mass shootings table with geocoded locations and replace missing latitudes and longitudes with geocoded.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>mass_shootings_cln <span class="ot">&lt;-</span> mass_shootings_cln <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(geocoded_locations, <span class="at">by =</span> <span class="st">"location"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">latitude =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(latitude), lat, latitude),</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">longitude =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(longitude), long, longitude))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>🔎 Checking for null values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(mass_shootings_cln<span class="sc">$</span>latitude))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(mass_shootings_cln<span class="sc">$</span>longitude))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>OK, this looks fine.</p>
</section>
</section>
<section id="exploratory-data-analysis-eda" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysis-eda">Exploratory data analysis (EDA)</h2>
<section id="writing-a-function" class="level3">
<h3 class="anchored" data-anchor-id="writing-a-function">❕ Writing a function</h3>
<p>To count unique values for all categorical variables separately, I’ll write a function, <code>count_unique</code>, to avoid copying and pasting a block of code several times.</p>
<p>Here we have a special case where we have to pass a dataframe column name (variable) to a function argument. The solution is to embrace the argument by surrounding it in doubled braces, like <code>group_by({{ var }})</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>count_unique <span class="ot">&lt;-</span> <span class="cf">function</span>(data, var) {</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>({{ var }}) <span class="sc">%&gt;%</span>    </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">percent =</span> scales<span class="sc">::</span><span class="fu">percent</span>(count<span class="sc">/</span><span class="fu">sum</span>(count), <span class="at">accuracy =</span> <span class="fl">0.1</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(count))</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="breakdown-by-categorical-variables" class="level3">
<h3 class="anchored" data-anchor-id="breakdown-by-categorical-variables">📄 Breakdown by categorical variables</h3>
<section id="gender" class="level4">
<h4 class="anchored" data-anchor-id="gender">Gender</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">count_unique</span>(mass_shootings_cln, gender)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  gender               count percent
  &lt;chr&gt;                &lt;int&gt; &lt;chr&gt;  
1 Male                   142 95.9%  
2 Female                   3 2.0%   
3 Male &amp; Female            2 1.4%   
4 Female (transgender)     1 0.7%   </code></pre>
</div>
</div>
</section>
<section id="race" class="level4">
<h4 class="anchored" data-anchor-id="race">Race</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">count_unique</span>(mass_shootings_cln, race) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 3
  race            count percent
  &lt;chr&gt;           &lt;int&gt; &lt;chr&gt;  
1 White              79 53.4%  
2 Black              26 17.6%  
3 Latino             12 8.1%   
4 &lt;NA&gt;               12 8.1%   
5 Asian              10 6.8%   
6 Other               5 3.4%   
7 Native American     3 2.0%   
8 Unclear             1 0.7%   </code></pre>
</div>
</div>
</section>
<section id="specific-location" class="level4">
<h4 class="anchored" data-anchor-id="specific-location">Specific location</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">count_unique</span>(mass_shootings_cln, location_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  location_2 count percent
  &lt;chr&gt;      &lt;int&gt; &lt;chr&gt;  
1 Other         58 39.2%  
2 Workplace     53 35.8%  
3 School        22 14.9%  
4 Religious      8 5.4%   
5 Military       6 4.1%   
6 Airport        1 0.7%   </code></pre>
</div>
</div>
</section>
<section id="prior-signs-of-mental-health-issues" class="level4">
<h4 class="anchored" data-anchor-id="prior-signs-of-mental-health-issues">Prior signs of mental health issues</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">count_unique</span>(mass_shootings_cln, prior_signs_mental_health_issues)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  prior_signs_mental_health_issues count percent
  &lt;chr&gt;                            &lt;int&gt; &lt;chr&gt;  
1 Yes                                 72 48.6%  
2 &lt;NA&gt;                                29 19.6%  
3 Unclear                             24 16.2%  
4 No                                  17 11.5%  
5 To be determined                     5 3.4%   
6 Unknown                              1 0.7%   </code></pre>
</div>
</div>
</section>
<section id="weapons-obtained-legally" class="level4">
<h4 class="anchored" data-anchor-id="weapons-obtained-legally">Weapons obtained legally</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">count_unique</span>(mass_shootings_cln, weapons_obtained_legally)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  weapons_obtained_legally count percent
  &lt;chr&gt;                    &lt;int&gt; &lt;chr&gt;  
1 Yes                         99 66.9%  
2 &lt;NA&gt;                        18 12.2%  
3 No                          16 10.8%  
4 To be determined             7 4.7%   
5 Unknown                      7 4.7%   
6 Partially                    1 0.7%   </code></pre>
</div>
</div>
</section>
<section id="type" class="level4">
<h4 class="anchored" data-anchor-id="type">Type</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">count_unique</span>(mass_shootings_cln, type)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  type  count percent
  &lt;chr&gt; &lt;int&gt; &lt;chr&gt;  
1 Mass    126 85.1%  
2 Spree    22 14.9%  </code></pre>
</div>
</div>
<p>Note: Spree shootings have three or more victims in a short time in multiple locations.</p>
</section>
</section>
<section id="age-of-shooter-distribution" class="level3">
<h3 class="anchored" data-anchor-id="age-of-shooter-distribution">📊 Age of shooter distribution</h3>
<div class="cell">
<details>
<summary>Code for creating the age_group column</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create "age group" column</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>mass_shootings_cln <span class="ot">&lt;-</span>  mass_shootings_cln <span class="sc">%&gt;%</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_group =</span> <span class="fu">case_when</span>(</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    age_of_shooter <span class="sc">&gt;=</span> <span class="dv">10</span> <span class="sc">&amp;</span> age_of_shooter <span class="sc">&lt;=</span> <span class="dv">14</span> <span class="sc">~</span> <span class="st">"10-14"</span>,</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    age_of_shooter <span class="sc">&lt;=</span> <span class="dv">19</span> <span class="sc">~</span> <span class="st">"15-19"</span>,</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    age_of_shooter <span class="sc">&lt;=</span> <span class="dv">24</span> <span class="sc">~</span> <span class="st">"20-24"</span>,</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    age_of_shooter <span class="sc">&lt;=</span> <span class="dv">29</span> <span class="sc">~</span> <span class="st">"25-29"</span>,</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    age_of_shooter <span class="sc">&lt;=</span> <span class="dv">34</span> <span class="sc">~</span> <span class="st">"30-34"</span>,</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    age_of_shooter <span class="sc">&lt;=</span> <span class="dv">39</span> <span class="sc">~</span> <span class="st">"35-39"</span>,</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    age_of_shooter <span class="sc">&lt;=</span> <span class="dv">44</span> <span class="sc">~</span> <span class="st">"40-44"</span>,</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    age_of_shooter <span class="sc">&lt;=</span> <span class="dv">49</span> <span class="sc">~</span> <span class="st">"45-49"</span>,</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    age_of_shooter <span class="sc">&lt;=</span> <span class="dv">54</span> <span class="sc">~</span> <span class="st">"50-54"</span>,</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    age_of_shooter <span class="sc">&lt;=</span> <span class="dv">59</span> <span class="sc">~</span> <span class="st">"55-59"</span>,</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>    age_of_shooter <span class="sc">&lt;=</span> <span class="dv">64</span> <span class="sc">~</span> <span class="st">"60-64"</span>,</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>    age_of_shooter <span class="sc">&lt;=</span> <span class="dv">69</span> <span class="sc">~</span> <span class="st">"65-69"</span>,</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>    age_of_shooter <span class="sc">&lt;=</span> <span class="dv">74</span> <span class="sc">~</span> <span class="st">"70-74"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> mass_shootings_cln <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(age_group)) <span class="sc">%&gt;%</span> </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(age_group) <span class="sc">%&gt;%</span> </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent =</span> scales<span class="sc">::</span><span class="fu">percent</span>(count<span class="sc">/</span><span class="fu">sum</span>(count), <span class="at">accuracy =</span> <span class="fl">0.1</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">label_text =</span> <span class="fu">str_glue</span>(<span class="st">"Age group: {age_group}</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="st">                               Count: {count}</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="st">                               Percent: {percent}"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age_group, <span class="at">y =</span> count, <span class="at">text =</span> label_text)) <span class="sc">+</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="fl">0.7</span>, <span class="at">fill =</span> <span class="st">"indianred"</span>) <span class="sc">+</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Age Distribution"</span>, <span class="at">x =</span> <span class="st">"age group"</span>) </span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p1, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-e573697a0bdd102adb9a" style="width:100%;height:464px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-e573697a0bdd102adb9a">{"x":{"data":[{"orientation":"v","width":[0.70000000000000007,0.70000000000000018,0.70000000000000018,0.69999999999999973,0.69999999999999929,0.69999999999999929,0.69999999999999929,0.69999999999999929,0.69999999999999929,0.69999999999999929,0.69999999999999929,0.69999999999999929,0.69999999999999929],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13],"y":[1,16,27,23,11,16,25,10,5,6,2,2,2],"text":["Age group: 10-14<br />Count: 1<br />Percent: 0.7%","Age group: 15-19<br />Count: 16<br />Percent: 11.0%","Age group: 20-24<br />Count: 27<br />Percent: 18.5%","Age group: 25-29<br />Count: 23<br />Percent: 15.8%","Age group: 30-34<br />Count: 11<br />Percent: 7.5%","Age group: 35-39<br />Count: 16<br />Percent: 11.0%","Age group: 40-44<br />Count: 25<br />Percent: 17.1%","Age group: 45-49<br />Count: 10<br />Percent: 6.8%","Age group: 50-54<br />Count: 5<br />Percent: 3.4%","Age group: 55-59<br />Count: 6<br />Percent: 4.1%","Age group: 60-64<br />Count: 2<br />Percent: 1.4%","Age group: 65-69<br />Count: 2<br />Percent: 1.4%","Age group: 70-74<br />Count: 2<br />Percent: 1.4%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(205,92,92,1)","line":{"width":null,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826491,"l":37.260273972602747},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Age Distribution","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,13.6],"tickmode":"array","ticktext":["10-14","15-19","20-24","25-29","30-34","35-39","40-44","45-49","50-54","55-59","60-64","65-69","70-74"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13],"categoryorder":"array","categoryarray":["10-14","15-19","20-24","25-29","30-34","35-39","40-44","45-49","50-54","55-59","60-64","65-69","70-74"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"age group","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-1.3500000000000001,28.350000000000001],"tickmode":"array","ticktext":["0","10","20"],"tickvals":[0,10,20],"categoryorder":"array","categoryarray":["0","10","20"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"count","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"a0c132d6548":{"x":{},"y":{},"text":{},"type":"bar"}},"cur_data":"a0c132d6548","visdat":{"a0c132d6548":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<ul>
<li>The vast majority of shooters were between 15 and 50 years old.</li>
<li>The age distribution is bimodal, with one mode around 23 years of age and a second mode around 41 years of age.</li>
<li>Most shooters were in the 20-24 age group (18.5 %), followed by 40-44 (17.1 %) and 25-29 (15.8 %).</li>
</ul>
<p>🔎 Who was the youngest shooter?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>mass_shootings_cln <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_min</span>(age_of_shooter, <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(case, date, summary, fatalities) <span class="sc">%&gt;%</span> </span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 13%">
<col style="width: 4%">
<col style="width: 76%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">case</th>
<th style="text-align: left;">date</th>
<th style="text-align: left;">summary</th>
<th style="text-align: right;">fatalities</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Westside Middle School killings</td>
<td style="text-align: left;">1998-03-24</td>
<td style="text-align: left;">Mitchell Scott Johnson, 13, and Andrew Douglas Golden, 11, two juveniles, ambushed students and teachers as they left the school; they were apprehended by police at the scene.</td>
<td style="text-align: right;">5</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="number-of-cases-per-year" class="level3">
<h3 class="anchored" data-anchor-id="number-of-cases-per-year">📊 Number of cases per year</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> mass_shootings_cln <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, count)) <span class="sc">+</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span> </span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">"indianred"</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of Cases per Year"</span>) </span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-ff3397a061e187f92ee8" style="width:100%;height:464px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-ff3397a061e187f92ee8">{"x":{"data":[{"orientation":"v","width":[0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[1982,1984,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[1,2,1,1,1,2,1,3,2,4,1,1,1,2,3,5,1,1,1,1,2,3,4,3,4,1,3,7,5,4,7,6,11,12,10,2,6,12,11],"text":["year: 1982<br />count:  1","year: 1984<br />count:  2","year: 1986<br />count:  1","year: 1987<br />count:  1","year: 1988<br />count:  1","year: 1989<br />count:  2","year: 1990<br />count:  1","year: 1991<br />count:  3","year: 1992<br />count:  2","year: 1993<br />count:  4","year: 1994<br />count:  1","year: 1995<br />count:  1","year: 1996<br />count:  1","year: 1997<br />count:  2","year: 1998<br />count:  3","year: 1999<br />count:  5","year: 2000<br />count:  1","year: 2001<br />count:  1","year: 2003<br />count:  1","year: 2004<br />count:  1","year: 2005<br />count:  2","year: 2006<br />count:  3","year: 2007<br />count:  4","year: 2008<br />count:  3","year: 2009<br />count:  4","year: 2010<br />count:  1","year: 2011<br />count:  3","year: 2012<br />count:  7","year: 2013<br />count:  5","year: 2014<br />count:  4","year: 2015<br />count:  7","year: 2016<br />count:  6","year: 2017<br />count: 11","year: 2018<br />count: 12","year: 2019<br />count: 10","year: 2020<br />count:  2","year: 2021<br />count:  6","year: 2022<br />count: 12","year: 2023<br />count: 11"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(70,130,180,1)","line":{"width":null,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1982,1982.5189873417721,1983.0379746835442,1983.5569620253164,1984.0759493670887,1984.5949367088608,1985.1139240506329,1985.632911392405,1986.1518987341772,1986.6708860759493,1987.1898734177216,1987.7088607594937,1988.2278481012659,1988.746835443038,1989.2658227848101,1989.7848101265822,1990.3037974683543,1990.8227848101267,1991.3417721518988,1991.8607594936709,1992.379746835443,1992.8987341772151,1993.4177215189873,1993.9367088607594,1994.4556962025317,1994.9746835443038,1995.493670886076,1996.0126582278481,1996.5316455696202,1997.0506329113923,1997.5696202531647,1998.0886075949368,1998.6075949367089,1999.126582278481,1999.6455696202531,2000.1645569620252,2000.6835443037974,2001.2025316455697,2001.7215189873418,2002.2405063291139,2002.7594936708861,2003.2784810126582,2003.7974683544303,2004.3164556962026,2004.8354430379748,2005.3544303797469,2005.873417721519,2006.3924050632911,2006.9113924050632,2007.4303797468353,2007.9493670886077,2008.4683544303798,2008.9873417721519,2009.506329113924,2010.0253164556962,2010.5443037974683,2011.0632911392404,2011.5822784810127,2012.1012658227849,2012.620253164557,2013.1392405063291,2013.6582278481012,2014.1772151898733,2014.6962025316457,2015.2151898734178,2015.7341772151899,2016.253164556962,2016.7721518987341,2017.2911392405063,2017.8101265822784,2018.3291139240507,2018.8481012658228,2019.367088607595,2019.8860759493671,2020.4050632911392,2020.9240506329113,2021.4430379746836,2021.9620253164558,2022.4810126582279,2023],"y":[1.0804409039271896,1.1333509359750671,1.1850958807066276,1.2356142090309841,1.2848443918572716,1.3327249000945607,1.3791942046519861,1.4241907764386614,1.4676530863637005,1.5095196053362163,1.5497288042653399,1.5882191540601494,1.6248613585701357,1.6591925370547558,1.6913793756695905,1.721717961526565,1.750504381737604,1.7780347234146452,1.8046050736695896,1.8305115196143744,1.8560501483609251,1.8815170470211666,1.9046443642292374,1.9212068692634123,1.9325936501291978,1.9403524183427705,1.9460308854203257,1.9511767628780496,1.9573377622321306,1.9660615949987559,1.9788959726941204,1.9970210233473398,2.0063781285538034,2.0020710544171152,1.9881639572559562,1.9687209933890071,1.9478063191349482,1.9294840908124553,1.9178184647402261,1.9168735972369324,1.9307136446212554,1.963402763211876,2.0190051093274759,2.0976346409364739,2.1862473492515031,2.2840681061671528,2.39185589382592,2.5103696943703055,2.640368489942805,2.782611262685919,2.9378569947422148,3.1068646682540573,3.290393265364008,3.4923522384791523,3.7139320244981837,3.9512268502557681,4.2003285108035051,4.4573288011931043,4.7183195164759395,4.9793924517037205,5.236639401928044,5.4861521622005061,5.7252980860071654,5.9670096795344207,6.2151569728966134,6.4691020726910544,6.7282070855149509,6.991834117965511,7.2593452766399444,7.5301026681354575,7.8034683990493798,8.0788045759786797,8.3554356117889821,8.6331690491980861,8.9124804838256022,9.1938681866545462,9.4778304286680637,9.7648654808489272,10.055471614180279,10.350147099645135],"text":["year: 1982.000<br />count:  1.080441","year: 1982.519<br />count:  1.133351","year: 1983.038<br />count:  1.185096","year: 1983.557<br />count:  1.235614","year: 1984.076<br />count:  1.284844","year: 1984.595<br />count:  1.332725","year: 1985.114<br />count:  1.379194","year: 1985.633<br />count:  1.424191","year: 1986.152<br />count:  1.467653","year: 1986.671<br />count:  1.509520","year: 1987.190<br />count:  1.549729","year: 1987.709<br />count:  1.588219","year: 1988.228<br />count:  1.624861","year: 1988.747<br />count:  1.659193","year: 1989.266<br />count:  1.691379","year: 1989.785<br />count:  1.721718","year: 1990.304<br />count:  1.750504","year: 1990.823<br />count:  1.778035","year: 1991.342<br />count:  1.804605","year: 1991.861<br />count:  1.830512","year: 1992.380<br />count:  1.856050","year: 1992.899<br />count:  1.881517","year: 1993.418<br />count:  1.904644","year: 1993.937<br />count:  1.921207","year: 1994.456<br />count:  1.932594","year: 1994.975<br />count:  1.940352","year: 1995.494<br />count:  1.946031","year: 1996.013<br />count:  1.951177","year: 1996.532<br />count:  1.957338","year: 1997.051<br />count:  1.966062","year: 1997.570<br />count:  1.978896","year: 1998.089<br />count:  1.997021","year: 1998.608<br />count:  2.006378","year: 1999.127<br />count:  2.002071","year: 1999.646<br />count:  1.988164","year: 2000.165<br />count:  1.968721","year: 2000.684<br />count:  1.947806","year: 2001.203<br />count:  1.929484","year: 2001.722<br />count:  1.917818","year: 2002.241<br />count:  1.916874","year: 2002.759<br />count:  1.930714","year: 2003.278<br />count:  1.963403","year: 2003.797<br />count:  2.019005","year: 2004.316<br />count:  2.097635","year: 2004.835<br />count:  2.186247","year: 2005.354<br />count:  2.284068","year: 2005.873<br />count:  2.391856","year: 2006.392<br />count:  2.510370","year: 2006.911<br />count:  2.640368","year: 2007.430<br />count:  2.782611","year: 2007.949<br />count:  2.937857","year: 2008.468<br />count:  3.106865","year: 2008.987<br />count:  3.290393","year: 2009.506<br />count:  3.492352","year: 2010.025<br />count:  3.713932","year: 2010.544<br />count:  3.951227","year: 2011.063<br />count:  4.200329","year: 2011.582<br />count:  4.457329","year: 2012.101<br />count:  4.718320","year: 2012.620<br />count:  4.979392","year: 2013.139<br />count:  5.236639","year: 2013.658<br />count:  5.486152","year: 2014.177<br />count:  5.725298","year: 2014.696<br />count:  5.967010","year: 2015.215<br />count:  6.215157","year: 2015.734<br />count:  6.469102","year: 2016.253<br />count:  6.728207","year: 2016.772<br />count:  6.991834","year: 2017.291<br />count:  7.259345","year: 2017.810<br />count:  7.530103","year: 2018.329<br />count:  7.803468","year: 2018.848<br />count:  8.078805","year: 2019.367<br />count:  8.355436","year: 2019.886<br />count:  8.633169","year: 2020.405<br />count:  8.912480","year: 2020.924<br />count:  9.193868","year: 2021.443<br />count:  9.477830","year: 2021.962<br />count:  9.764865","year: 2022.481<br />count: 10.055472","year: 2023.000<br />count: 10.350147"],"type":"scatter","mode":"lines","name":"fitted values","line":{"width":2.6456692913385824,"color":"rgba(205,92,92,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826491,"l":48.949771689497723},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Number of Cases per Year","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1979.4549999999999,2025.5450000000001],"tickmode":"array","ticktext":["1980","1990","2000","2010","2020"],"tickvals":[1980,1990,2000,2010,2020],"categoryorder":"array","categoryarray":["1980","1990","2000","2010","2020"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"year","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.60000000000000009,12.6],"tickmode":"array","ticktext":["0.0","2.5","5.0","7.5","10.0","12.5"],"tickvals":[0,2.5,5,7.5,10,12.5],"categoryorder":"array","categoryarray":["0.0","2.5","5.0","7.5","10.0","12.5"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"count","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"a0c5d3b5824":{"x":{},"y":{},"type":"bar"},"a0c814ec1":{"x":{},"y":{}}},"cur_data":"a0c5d3b5824","visdat":{"a0c5d3b5824":["function (y) ","x"],"a0c814ec1":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<ul>
<li>We can see an increase in mass shootings in the last 12 years.</li>
<li>2020 has a smaller number of cases probably due to Covid restrictions.</li>
<li>The data for 2023 is incomplete, with 11 cases in the first ten months.</li>
</ul>
</section>
<section id="fatalities-injured-relationship" class="level3">
<h3 class="anchored" data-anchor-id="fatalities-injured-relationship">📊 Fatalities-Injured relationship</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> mass_shootings_cln <span class="sc">%&gt;%</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> fatalities, <span class="at">y =</span> injured)) <span class="sc">+</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_sqrt</span>() <span class="sc">+</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Fatalities-Injured Relationship"</span>)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-ab64eaf0df9d4b2bcaeb" style="width:100%;height:464px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-ab64eaf0df9d4b2bcaeb">{"x":{"data":[{"x":[18.128887518309057,3.0047589251771569,2.9887847848236562,4.7926359180361029,3.1055866442620754,7.6934954801574351,5.3038508344441651,5.9434387207031252,3.1979366455227138,6.9658096432685852,10.663331314176322,6.3241272130981088,4.8302377894520756,2.9127886751666665,5.2925208438187834,2.7461001696065068,6.7594792755320672,2.7712693015113472,2.6343503458425404,4.3532015178352594,20.764132582582533,9.6571487041190274,4.2841948878020046,3.8884430045261977,9.095088112168014,8.1332857917994268,4.26925915107131,10.333241360262036,8.3164035234600302,4.138825508579612,4.8611679131165149,4.0294157708063718,2.76053771879524,7.0876182459294794,9.066829678229988,21.972371080145241,3.1962934115901591,11.904746468923985,5.3222779227420691,3.2194158351048827,4.696702089905739,3.3208370858803393,12.366473188437521,10.780417190305888,2.6136362906545401,5.2137945538386701,2.7118462251499293,4.9344956800341606,10.327079359069467,4.0887385971844195,2.9512732988223433,17.284845121391118,4.2044031979516152,4.9786409450694915,25.807678217999637,3.0092846339568498,3.0328102760016917,57.64446864165366,2.8132298594340681,3.3539460303261874,5.360768327862024,3.3185972778126596,2.6015165509656071,5.2342089153826237,5.0421181332319973,3.1187152506783606,5.3260164774954317,48.952907905727628,2.6088360309600831,5.8774556534364821,14.288804827444256,2.8314747067168353,2.6651394680142402,9.0585130576044328,4.688350364379585,8.8968194050714366,3.0753641935065388,4.8895188057795167,6.3435192869976165,2.6941396566107869,3.9526683785021306,11.749253649823368,6.6314967330545187,6.1853100046515461,5.0317908531054858,4.6752077300101522,27.334924820624291,6.9264574853703378,6.7657634248957041,12.277751541882754,5.7200048169121143,7.1420439179986719,5.102579126879573,7.8512876134365799,5.3617691287770866,6.2897901358082891,8.8270609958097346,4.2386713886633514,12.70577938798815,14.136525881849229,8.1131958644837141,5.9987023113295432,5.0814881520345807,5.9353796299546957,9.3405316824093454,5.8176662933081387,31.743426758609711,6.3085815433412789,6.1542387878522273,6.707622827403247,7.7789788145571945,10.002044016867876,7.2796211920678617,5.2152533605694771,6.7963205030187961,5.2930141558870671,6.7310425318777565,5.1490611303597689,7.1306383283808827,7.6830941835418347,8.9517306348308914,13.175645215250551,3.6099250640720131,4.7604986002668737,5.3297285648062829,4.7085174705833195,3.6863675724714993,6.1819287335500119,5.7591602629050609,4.9283827140927317,3.6734357010573149,5.8719844778999688,3.9720835037529469,8.7082851117476814,4.7428695274516937,3.8444429775699973,4.8226134566590186,5.8497252408415079,23.684631154313685,9.7242561936378475,8.6596739653497927,6.3061668176203964,6.9266308631747959,5.8215358646586539,15.041141546517611,22.221876884996892,6.2798145981505513,8.2137008247897025],"y":[3.6299011345167314,0.023229725394712825,2.4311643373325627,1.4456652913562471,2.4603226015304305,2.6533387278566525,2.8402067239587985,2.4833873226421614,2.2676656183297146,0.97176179075261049,3.1746004380721233,2.4334934288495442,5.0008206559686572,1.4173350674373373,1.4066746752978578,1.400947261920785,6.8057472894582061,-0.010083093525270613,1.0065896724179626,0.034224066139473604,4.1338385442208905,1.7209307825316198,0.0028704021120741913,2.6151277635716892,0.017757589432536358,2.6599684640804329,0.96604645304884051,0.002759002124343643,1.019080947146233,-0.0277073823017049,-0.010319126672417672,1.7107503861935447,2.8571355270174004,4.9693108443473362,5.1929035469016886,5.0627745569917622,3.492439745079821,1.9767540335878331,2.4843188846937334,0.99508099636109293,-0.030194537381179075,-0.037387588718880913,4.6663565623703764,2.4265445403224781,1.7477059889423234,0.022385968434556681,1.3758853009865477,1.4473808635533645,3.5964362326446007,2.0097748216923135,-0.0091023199804296899,4.1024689274786574,1.0381640228649964,3.1366177688087542,4.5049651591106388,-0.030667992358725048,1.7031129528319673,23.380975368796371,1.3783888697574773,-0.019940156891633844,0.036683431433569592,0.022271500787536591,0.019053523587502993,2.4338326216134507,-0.00197047470100635,1.7504822524600971,3.3360555460257553,7.2804474474671714,3.7585498252379175,1.4265953392776942,4.5952387797905416,3.0098612997232403,0.0056470146506103144,3.0070660605376984,1.4450653760120975,0.97231647612871475,0.96405846257506034,0.96329996094238735,3.5757686967273843,3.4751844142186386,1.4469570791460049,2.8432177511694769,-0.0090478367014193081,1.7672346247363282,-0.02938962850706861,1.4461312340558465,1.4127628640063821,0.98535046240198598,1.7500065640644804,8.3641673141029553,0.98861446536490361,1.6977910913042145,-0.016636440428222165,0.97244370061033969,2.62051950467918,3.6134883015284158,1.4136355425952563,1.0112011823062774,5.5734413782133023,2.0264135237808647,1.7044767834571515,0.99694916486451768,4.5861197218845016,1.4236874986776569,1.9965823402801013,0.96309690243230994,4.7822608769546857,2.0065283913666274,2.2002066291283242,1.4106553801385806,0.0050936771955487417,2.2125318731366779,2.0307607853478116,2.6257894247311935,2.8457089896887435,2.0191252841812681,-0.031024738364795114,1.7473509439307591,0.033271777743858193,2.6683563564537995,3.5908345627945888,4.9240355870189605,4.9710446975177938,3.1810183004198396,1.012293913465147,1.4113225876120365,1.7652046627382998,1.0295828948055317,0.028942185644743677,4.8191404913648119,1.0182849693752829,4.3770632683920825,2.8275785934150361,2.4695769606069948,0.027997553289398035,3.1693994007440107,2.2617780642362604,1.0268879332960916,4.4844991714935016,2.0371071407935948,3.4685100803385964,5.3659387602014172,1.9842115054324088,3.7407065843625813,2.4486553225581087,4.391919557397113,1.0257194030633139,1.7050516714742774],"text":["fatalities: 18<br />injured:  13","fatalities:  3<br />injured:   0","fatalities:  3<br />injured:   6","fatalities:  5<br />injured:   2","fatalities:  3<br />injured:   6","fatalities:  8<br />injured:   7","fatalities:  5<br />injured:   8","fatalities:  6<br />injured:   6","fatalities:  3<br />injured:   5","fatalities:  7<br />injured:   1","fatalities: 11<br />injured:  10","fatalities:  6<br />injured:   6","fatalities:  5<br />injured:  25","fatalities:  3<br />injured:   2","fatalities:  5<br />injured:   2","fatalities:  3<br />injured:   2","fatalities:  7<br />injured:  46","fatalities:  3<br />injured:   0","fatalities:  3<br />injured:   1","fatalities:  4<br />injured:   0","fatalities: 21<br />injured:  17","fatalities: 10<br />injured:   3","fatalities:  4<br />injured:   0","fatalities:  4<br />injured:   7","fatalities:  9<br />injured:   0","fatalities:  8<br />injured:   7","fatalities:  4<br />injured:   1","fatalities: 10<br />injured:   0","fatalities:  8<br />injured:   1","fatalities:  4<br />injured:   0","fatalities:  5<br />injured:   0","fatalities:  4<br />injured:   3","fatalities:  3<br />injured:   8","fatalities:  7<br />injured:  25","fatalities:  9<br />injured:  27","fatalities: 22<br />injured:  26","fatalities:  3<br />injured:  12","fatalities: 12<br />injured:   4","fatalities:  5<br />injured:   6","fatalities:  3<br />injured:   1","fatalities:  5<br />injured:   0","fatalities:  3<br />injured:   0","fatalities: 12<br />injured:  22","fatalities: 11<br />injured:   6","fatalities:  3<br />injured:   3","fatalities:  5<br />injured:   0","fatalities:  3<br />injured:   2","fatalities:  5<br />injured:   2","fatalities: 10<br />injured:  13","fatalities:  4<br />injured:   4","fatalities:  3<br />injured:   0","fatalities: 17<br />injured:  17","fatalities:  4<br />injured:   1","fatalities:  5<br />injured:  10","fatalities: 26<br />injured:  20","fatalities:  3<br />injured:   0","fatalities:  3<br />injured:   3","fatalities: 58<br />injured: 546","fatalities:  3<br />injured:   2","fatalities:  3<br />injured:   0","fatalities:  5<br />injured:   0","fatalities:  3<br />injured:   0","fatalities:  3<br />injured:   0","fatalities:  5<br />injured:   6","fatalities:  5<br />injured:   0","fatalities:  3<br />injured:   3","fatalities:  5<br />injured:  11","fatalities: 49<br />injured:  53","fatalities:  3<br />injured:  14","fatalities:  6<br />injured:   2","fatalities: 14<br />injured:  21","fatalities:  3<br />injured:   9","fatalities:  3<br />injured:   0","fatalities:  9<br />injured:   9","fatalities:  5<br />injured:   2","fatalities:  9<br />injured:   1","fatalities:  3<br />injured:   1","fatalities:  5<br />injured:   1","fatalities:  6<br />injured:  13","fatalities:  3<br />injured:  12","fatalities:  4<br />injured:   2","fatalities: 12<br />injured:   8","fatalities:  7<br />injured:   0","fatalities:  6<br />injured:   3","fatalities:  5<br />injured:   0","fatalities:  5<br />injured:   2","fatalities: 27<br />injured:   2","fatalities:  7<br />injured:   1","fatalities:  7<br />injured:   3","fatalities: 12<br />injured:  70","fatalities:  6<br />injured:   1","fatalities:  7<br />injured:   3","fatalities:  5<br />injured:   0","fatalities:  8<br />injured:   1","fatalities:  5<br />injured:   7","fatalities:  6<br />injured:  13","fatalities:  9<br />injured:   2","fatalities:  4<br />injured:   1","fatalities: 13<br />injured:  31","fatalities: 14<br />injured:   4","fatalities:  8<br />injured:   3","fatalities:  6<br />injured:   1","fatalities:  5<br />injured:  21","fatalities:  6<br />injured:   2","fatalities:  9<br />injured:   4","fatalities:  6<br />injured:   1","fatalities: 32<br />injured:  23","fatalities:  6<br />injured:   4","fatalities:  6<br />injured:   5","fatalities:  7<br />injured:   2","fatalities:  8<br />injured:   0","fatalities: 10<br />injured:   5","fatalities:  7<br />injured:   4","fatalities:  5<br />injured:   7","fatalities:  7<br />injured:   8","fatalities:  5<br />injured:   4","fatalities:  7<br />injured:   0","fatalities:  5<br />injured:   3","fatalities:  7<br />injured:   0","fatalities:  8<br />injured:   7","fatalities:  9<br />injured:  13","fatalities: 13<br />injured:  24","fatalities:  4<br />injured:  25","fatalities:  5<br />injured:  10","fatalities:  5<br />injured:   1","fatalities:  5<br />injured:   2","fatalities:  4<br />injured:   3","fatalities:  6<br />injured:   1","fatalities:  6<br />injured:   0","fatalities:  5<br />injured:  23","fatalities:  4<br />injured:   1","fatalities:  6<br />injured:  19","fatalities:  4<br />injured:   8","fatalities:  9<br />injured:   6","fatalities:  5<br />injured:   0","fatalities:  4<br />injured:  10","fatalities:  5<br />injured:   5","fatalities:  6<br />injured:   1","fatalities: 24<br />injured:  20","fatalities: 10<br />injured:   4","fatalities:  9<br />injured:  12","fatalities:  6<br />injured:  29","fatalities:  7<br />injured:   4","fatalities:  6<br />injured:  14","fatalities: 15<br />injured:   6","fatalities: 22<br />injured:  19","fatalities:  6<br />injured:   1","fatalities:  8<br />injured:   3"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826491,"l":43.105022831050235},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Fatalities-Injured Relationship","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.1506310535687958,60.39661624618806],"tickmode":"array","ticktext":["0","10","20","30","40","50","60"],"tickvals":[0,10,20,30,40,50,60],"categoryorder":"array","categoryarray":["0","10","20","30","40","50","60"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"fatalities","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-1.2083057365946435,24.551893516672134],"tickmode":"array","ticktext":["0","100","200","300","400","500","600"],"tickvals":[0,10,14.142135623730951,17.320508075688775,20,22.360679774997898,24.494897427831781],"categoryorder":"array","categoryarray":["0","100","200","300","400","500","600"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"injured","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"a0c1e964683":{"x":{},"y":{},"type":"scatter"}},"cur_data":"a0c1e964683","visdat":{"a0c1e964683":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<p>Please note that the <code>Injured</code> values are square root scaled for better visibility, but you can see the actual values by hovering over the points.</p>
<p><strong>Summary of fatalities</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mass_shootings_cln<span class="sc">$</span>fatalities)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  3.000   4.000   6.000   7.743   8.000  58.000 </code></pre>
</div>
</div>
<p><strong>Summary of injured people</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mass_shootings_cln<span class="sc">$</span>injured)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   0.00    1.00    3.00   10.99   10.00  546.00 </code></pre>
</div>
</div>
</section>
<section id="total-fatalities-by-state" class="level3">
<h3 class="anchored" data-anchor-id="total-fatalities-by-state">📊 Total fatalities by state</h3>
<section id="data-manipulation" class="level4">
<h4 class="anchored" data-anchor-id="data-manipulation">🛠️ Data manipulation</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create us states with abbreviations tibble</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>states_with_abbr <span class="ot">&lt;-</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">state =</span> state.name, <span class="at">abbr =</span> state.abb) <span class="sc">%&gt;%</span> </span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(<span class="fu">tibble</span>(<span class="at">state =</span> <span class="st">"District of Columbia"</span>, <span class="at">abbr =</span> <span class="st">"DC"</span>))</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="co"># data manipulation</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>by_state <span class="ot">&lt;-</span> mass_shootings_cln <span class="sc">%&gt;%</span> </span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># recode D.d. to District of Columbia</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">location =</span> <span class="fu">ifelse</span>(location <span class="sc">==</span> <span class="st">"Washington, D.C."</span>, </span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Washington, District of Columbia"</span>, </span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>                           location)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># separate location into city and state</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(location, <span class="fu">c</span>(<span class="st">"city"</span>, <span class="st">"state"</span>), <span class="at">sep =</span> <span class="st">", "</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># group and summarize</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span> </span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_cases =</span> <span class="fu">n</span>(),</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_fatalities =</span> <span class="fu">sum</span>(fatalities), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add us states abbreviations</span></span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(states_with_abbr, <span class="at">by =</span> <span class="st">"state"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># rearrange columns</span></span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state, abbr, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="top-ten-states-regarding-number-of-cases-and-fatalities" class="level4">
<h4 class="anchored" data-anchor-id="top-ten-states-regarding-number-of-cases-and-fatalities">📈 Top ten states regarding number of cases and fatalities</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>by_state <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>total_cases, <span class="sc">-</span>total_fatalities) <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   state        abbr  total_cases total_fatalities
   &lt;chr&gt;        &lt;chr&gt;       &lt;int&gt;            &lt;dbl&gt;
 1 California   CA             26              178
 2 Texas        TX             13              159
 3 Florida      FL             13              129
 4 Colorado     CO              8               53
 5 Washington   WA              7               37
 6 Pennsylvania PA              6               32
 7 New York     NY              5               40
 8 Wisconsin    WI              5               28
 9 Illinois     IL              5               25
10 Virginia     VA              4               53</code></pre>
</div>
</div>
</section>
<section id="total-fatalities-by-state-visualization" class="level4">
<h4 class="anchored" data-anchor-id="total-fatalities-by-state-visualization">📊 Total fatalities by state visualization</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>by_state <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_geo</span>(<span class="at">locationmode =</span> <span class="st">'USA-states'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_trace</span>(<span class="at">z =</span> <span class="sc">~</span>total_fatalities,</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">locations =</span> <span class="sc">~</span>abbr,</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="sc">~</span>total_fatalities,</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">colors =</span> <span class="sc">~</span><span class="st">"Reds"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">geo =</span> <span class="fu">list</span>(</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">scope =</span> <span class="st">"usa"</span>,</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">projection =</span> <span class="fu">list</span>(<span class="at">type =</span> <span class="st">"albers usa"</span>),</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">lakecolor =</span> <span class="fu">toRGB</span>(<span class="st">"white"</span>)</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-f7de8752138389593466" style="width:100%;height:464px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-f7de8752138389593466">{"x":{"visdat":{"a0c5f552bbf":["function () ","plotlyVisDat"]},"cur_data":"a0c5f552bbf","attrs":{"a0c5f552bbf":{"locationmode":"USA-states","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"z":{},"locations":{},"color":{},"colors":{},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"mapType":"geo","geo":{"domain":{"x":[0,1],"y":[0,1]},"scope":"usa","projection":{"type":"albers usa"},"lakecolor":"rgba(255,255,255,1)"},"scene":{"zaxis":{"title":"total_fatalities"}},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"colorbar":{"title":"total_fatalities","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":[["0","rgba(255,245,240,1)"],["0.0416666666666667","rgba(255,238,230,1)"],["0.0833333333333333","rgba(255,231,220,1)"],["0.125","rgba(254,224,210,1)"],["0.166666666666667","rgba(254,212,193,1)"],["0.208333333333333","rgba(253,199,177,1)"],["0.25","rgba(252,187,161,1)"],["0.291666666666667","rgba(253,174,145,1)"],["0.333333333333333","rgba(253,160,129,1)"],["0.375","rgba(252,146,114,1)"],["0.416666666666667","rgba(252,133,101,1)"],["0.458333333333333","rgba(252,120,87,1)"],["0.5","rgba(251,106,74,1)"],["0.541666666666667","rgba(247,92,64,1)"],["0.583333333333333","rgba(243,77,54,1)"],["0.625","rgba(239,59,44,1)"],["0.666666666666667","rgba(227,49,39,1)"],["0.708333333333333","rgba(215,37,34,1)"],["0.75","rgba(203,24,29,1)"],["0.791666666666667","rgba(190,21,26,1)"],["0.833333333333333","rgba(178,18,24,1)"],["0.875","rgba(165,15,21,1)"],["0.916666666666667","rgba(144,9,19,1)"],["0.958333333333333","rgba(123,3,16,1)"],["1","rgba(103,0,13,1)"]],"showscale":true,"locationmode":"USA-states","z":[3,6,5,178,53,41,12,129,22,7,25,11,6,3,20,3,18,14,7,18,17,7,10,9,63,4,3,40,17,20,19,13,32,13,15,159,6,53,37,28],"locations":["AL","AZ","AR","CA","CO","CT","DC","FL","GA","HI","IL","IN","IA","KS","KY",null,"ME","MD","MA","MI","MN","MS","MO","NE","NV","NJ","NM","NY","NC","OH","OK","OR","PA","SC","TN","TX","UT","VA","WA","WI"],"type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":3,"cmax":178,"colorscale":[["0","rgba(255,245,240,1)"],["0.0416666666666667","rgba(255,238,230,1)"],["0.0833333333333333","rgba(255,231,220,1)"],["0.125","rgba(254,224,210,1)"],["0.166666666666667","rgba(254,212,193,1)"],["0.208333333333333","rgba(253,199,177,1)"],["0.25","rgba(252,187,161,1)"],["0.291666666666667","rgba(253,174,145,1)"],["0.333333333333333","rgba(253,160,129,1)"],["0.375","rgba(252,146,114,1)"],["0.416666666666667","rgba(252,133,101,1)"],["0.458333333333333","rgba(252,120,87,1)"],["0.5","rgba(251,106,74,1)"],["0.541666666666667","rgba(247,92,64,1)"],["0.583333333333333","rgba(243,77,54,1)"],["0.625","rgba(239,59,44,1)"],["0.666666666666667","rgba(227,49,39,1)"],["0.708333333333333","rgba(215,37,34,1)"],["0.75","rgba(203,24,29,1)"],["0.791666666666667","rgba(190,21,26,1)"],["0.833333333333333","rgba(178,18,24,1)"],["0.875","rgba(165,15,21,1)"],["0.916666666666667","rgba(144,9,19,1)"],["0.958333333333333","rgba(123,3,16,1)"],["1","rgba(103,0,13,1)"]],"showscale":false,"color":[3,6,5,178,53,41,12,129,22,7,25,11,6,3,20,3,18,14,7,18,17,7,10,9,63,4,3,40,17,20,19,13,32,13,15,159,6,53,37,28]}},"geo":"geo","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
</section>
<section id="shiny-app" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="shiny-app">Shiny app</h2>
<p>The app you can see below is embedded in this <code>quarto</code> document since my website is static. It was originally published on <a href="https://sandra-jurela.shinyapps.io/shiny-mass-shootings-usa/">shinyapps.io</a>, where you can also interact with it.</p>
<p><strong>Note:</strong> If you don’t see the application, I’ve run out of my 25 active hours (when my applications are not idle). Sorry, this is a free account, and my app will not be available again until the following month cycle. Hope you get lucky! 😊</p>
<p>📢 By clicking on each circle, you can read a summary of the mass shooting case.</p>
<p><br></p>
<div class="column-screen">
<iframe height="800" width="100%" frameborder="no" src="https://sandra-jurela.shinyapps.io/shiny-mass-shootings-usa/">
</iframe>
</div>
<p>Thanks for reading!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp(/https:\/\/sandrajurela\.com/);
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
    var links = window.document.querySelectorAll('a:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
<script src="https://giscus.app/client.js" data-repo="sandra-jurela/my-personal-Quarto-blog" data-repo-id="R_kgDOI6JBDg" data-category="General" data-category-id="DIC_kwDOI6JBDs4CUB2R" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">© 2023 Sandra Jurela. All Rights Reserved<br>
Built with 🧠 and <a href="https://quarto.org">Quarto</a> in RStudio.</div>
  </div>
</footer>



<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>